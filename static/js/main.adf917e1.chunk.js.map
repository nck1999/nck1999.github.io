{"version":3,"sources":["utils/qr.ts","hooks/useLock.ts","hooks/useEncryptedStore.ts","assets/cross.svg","hooks/useCamera.ts","components/Place.tsx","utils/dayjs.ts","assets/tick.svg","assets/checkbox.svg","assets/checkboxChecked.svg","components/CheckBox.tsx","containers/Confirm/ConfirmPage.tsx","components/LeaveModal/Prompt.tsx","components/DatePicker.tsx","components/LeaveModal/TimePickModal.tsx","components/LeaveModal/index.tsx","hooks/useBookmark.ts","hooks/useTravelRecord.ts","locales/english/index.ts","locales/traditionalChinese/index.ts","locales/index.ts","components/PageLoading.tsx","assets/greenTick.svg","containers/Confirm/AutoLeaveModal.tsx","containers/Confirm/index.tsx","App.tsx","hooks/useMigration.ts","serviceWorkerRegistration.ts","index.tsx","hooks/useTime.ts","constants/languageType.ts","components/Button.tsx","hooks/useI18n.ts","assets/crossBlack.svg"],"names":["qrDecode","input","startsWith","venueId","substring","base64Data","json","JSON","parse","decodeURIComponent","escape","window","atob","getVenueName","decodedJson","language","trimmedZhName","trim","propOr","trimmedEnName","chineseName","isEmpty","englishName","languageType","EN","getHash","string","SHA256","toString","qrEncode","typeEn","typeZh","nameEn","nameZh","type","venueCode","venueID","metadata","hash","btoa","unescape","encodeURIComponent","stringify","constate","useTravelRecord","lockTravelRecord","travelRecordUnlocked","unlocked","travelRecordEncrypted","isEncrypted","encryptTravelRecord","unlockTravelRecord","useBookmarkLocation","lockBookmarkLocation","bookmarkLocationUnlocked","bookmarkLocationEncrypted","encryptBookmarkLocation","unlockBookmarkLocation","lock","encrypt","password","unlock","UseLockProvider","useLock","encryptValue","AES","useEncryptedStore","key","fallbackValue","defaultValue","useLocalStorage","incognito","setIncognito","useState","setPassword","setUnlocked","savedValue","setSavedValue","decryptedValue","setDecryptedValue","useMemo","e","useMount","useUpdateEffect","value","initPassword","useCallback","newPassword","data","unlockStore","decrypt","enc","Utf8","decryptValue","lockStore","setValue","navigator","hasCameraSupport","preferredCameraId","setPreferredCameraId","cameraList","setCameraList","initCameraList","a","hasIn","mediaDevices","enumerateDevices","deviceList","filter","device","kind","alert","useEffect","any","deviceId","UseCameraProvider","useCamera","Place","onChange","placeholder","readOnly","rest","StyledInput","target","async","styled","TextareaAutosize","dayjs","date","_","locale","i18n","toLowerCase","CheckBox","checked","handleClick","isAndroid","StyledCheckbox","onClick","color","IOSCheckBox","src","checkboxChecked","checkbox","undefined","img","Checkbox","ConfirmPage","travelRecord","confirmPageIcon","autoLeave","setAutoLeave","autoLeaveHour","handleChangeAutoLeaveHour","handleLeave","t","useTranslation","useI18n","inTime","place","venueType","locationType","PLACE","PageWrapper","Header","Logo","Cross","cross","to","MessageWrapper","TAXI","Msg","License","PlaceWrapper","Time","format","TickWrapper","TickWrapperInner","Tick","tick","ActionGroup","shadowed","LeaveMessage","AutoLeave","CheckBoxWrapper","isNil","hour","Change","div","Prompt","isModalOpen","onCancel","onLeaveNow","onLeaved","outTime","toDate","heightBase","isOpen","onRequestClose","style","overlay","backgroundColor","content","outline","border","padding","borderRadius","width","position","top","left","transform","height","overflow","ariaHideApp","CrossWrapper","crossBlack","Title","time","GreenButton","ModalConfirmButton","DatePicker","forwardRef","props","ref","pickerInstance","setPickerInstance","useImperativeHandle","init","ele","document","querySelector","Picker","inline","rows","getValue","getDate","Wrapper","className","TimePickModal","onConfirm","currentTime","useTime","datePickerRef","useRef","showPastDateError","setShowPastDateError","showFutureDateError","setShowFutureDateError","onAfterOpen","current","TimePickerWrapper","leaveDate","Date","leaveDateDayJs","startOf","isBefore","isAfter","Snackbar","open","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","Alert","elevation","variant","severity","LeaveModal","id","visible","onDiscard","onFinish","getTravelRecord","isTimePickModalOpen","setIsTimePickModalOpen","trimData","pick","bookmarkLocation","setBookmarkLocation","removeBookmarkLocation","prev","reject","createBookmarkLocation","record","createdAt","toISOString","uuid","getBookmarkLocationId","trimmedData","result","find","item","trimmedItem","equals","UseBookmarkLocationProvider","travelRecordInputType","sortRecord","sort","b","isSame","setTravelRecord","browserHistory","useHistory","autoRemoveRecordDay","setAutoRemoveRecordDay","reduce","acc","pastTravelRecord","currentTravelRecord","diff","createTravelRecord","updateTravelRecord","index","findIndex","adjust","currentRecord","removeTravelRecord","enterLocation","location","now","add","push","pathname","state","UseTravelRecordProvider","locals","global","tutorial","main_screen","mainScreen","qr_reader","qrReader","qr_generator","qrGenerator","login","disclaimer","confirm","confirm_page_setting","confirmPageSetting","camera_setting","cameraSetting","vaccination_qr_reader","use","initReactI18next","resources","traditionalChinese","english","lng","fallbackLng","interpolation","escapeValue","debug","PageLoading","showLoadingIndicator","setLoadingIndicatorVisibility","timer","setTimeout","clearTimeout","FixWrapper","CircularProgress","AutoLeaveModal","selectedAutoLeaveHour","autoLeaveHourTmp","setAutoLeaveHourTmp","HourListWrapper","HourList","map","HourListItem","SelectedTick","greenTick","TimeWrapper","h1","ul","li","Confirm","useParams","useLocation","isAutoLeaveModalOpen","setIsAutoLeaveModalOpen","isLeaveModalOpen","setIsLeaveModalOpen","replace","setAutoLeaveHour","QRGenerator","React","lazy","QRReader","CameraSetting","Tutorial","MainScreen","Disclaimer","Login","ConfirmPageSetting","VaccinationQRReader","App","removePasswordHash","useShallowCompareEffect","has","useMigration","finishedTutorial","setFinishedTutorial","setConfirmPageIcon","handleBlur","addEventListener","removeEventListener","pageMap","privateRoute","route","exact","path","component","matchPath","GlobalStyle","Fragment","String","match","CSSTransition","in","timeout","classNames","unmountOnExit","fallback","createGlobalStyle","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","console","log","onUpdate","onSuccess","catch","error","theme","createMuiTheme","palette","primary","main","teal","secondary","yellow","ReactDOM","render","StrictMode","basename","ThemeProvider","getElementById","URL","process","href","origin","fetch","headers","response","contentType","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker","serviceWorkerRegistration","setCurrentTime","useHarmonicIntervalFn","UseTimeProvider","ConfirmButton","button","disabled","setLanguage","changeLanguage","UseI18nProvider"],"mappings":"kRAgCaA,EAAW,SAACC,GACvB,IAAKA,EAAMC,WAAW,SAAU,OAAO,KACvC,IAAMC,EAAUF,EAAMG,UAAU,EAAG,IAE7BC,EAAaJ,EAAMG,UAAU,IAC7BE,EAAoBC,KAAKC,MAC7BC,mBAAmBC,OAAOC,OAAOC,KAAKP,MAGxC,OAAO,2BAAKC,GAAZ,IAAkBH,aAGPU,EAAe,SAC1BC,EACAC,GAEA,IAAKD,EAAa,MAAO,GAEzB,IAAME,EAAgBC,YAAKC,YAAO,GAAI,SAAUJ,IAC1CK,EAAgBF,YAAKC,YAAO,GAAI,SAAUJ,IAC1CX,EAAUc,YAAKC,YAAO,GAAI,UAAWJ,IAErCM,EAAeC,YAAQL,GAExBK,YAAQF,GAGThB,EAFAgB,EAFAH,EAMEM,EAAeD,YAAQF,GAExBE,YAAQL,GAGTb,EAFAa,EAFAG,EAMJ,OAAOJ,IAAaQ,IAAaC,GAAKF,EAAcF,GAIzCK,EAAU,SAACtB,GACtB,IAAMuB,EAAM,cAAUvB,EAAV,QACZ,OAAOwB,iBAAOD,GAAQE,YAGXC,EAAW,SAAC,GAQL,IAPlBC,EAOiB,EAPjBA,OACAC,EAMiB,EANjBA,OACAC,EAKiB,EALjBA,OACAC,EAIiB,EAJjBA,OACAC,EAGiB,EAHjBA,KACAC,EAEiB,EAFjBA,UACAC,EACiB,EADjBA,QAEM9B,EAAO,CACX+B,SAAWhB,YAAQS,IAAYT,YAAQU,GAA+B,KAArB,CAAED,SAAQC,UAC3DE,SACAD,SACAE,OACAI,KAAMb,EAAQW,IAGV/B,EAAaM,OAAO4B,KACxBC,SAASC,mBAAmBlC,KAAKmC,UAAUpC,MAG7C,MAAM,QAAN,OAAe6B,GAAf,OAA2BC,GAA3B,OAAqC/B,K,0IC7FGsC,aAAS,WAAO,IAAD,EAOnDC,cALFC,EAFqD,EAErDA,iBACUC,EAH2C,EAGrDC,SACaC,EAJwC,EAIrDC,YACAC,EALqD,EAKrDA,oBACAC,EANqD,EAMrDA,mBANqD,EAcnDC,cALFC,EATqD,EASrDA,qBACUC,EAV2C,EAUrDP,SACaQ,EAXwC,EAWrDN,YACAO,EAZqD,EAYrDA,wBACAC,EAbqD,EAarDA,uBAGF,MAAO,CACLC,KAAM,WACJb,IACAQ,KAEFN,SAAUD,GAAwBQ,EAClCL,YAAaD,GAAyBO,EACtCI,QAAS,SAACC,GACRJ,EAAwBI,GACxBV,EAAoBU,IAEtBC,OAAQ,SAACD,GAAD,OACNT,EAAmBS,IAAaH,EAAuBG,Q,mBA5B/CE,E,KAAiBC,E,6HCDzBC,EAAe,SAAC/D,EAAe2D,GAAhB,OACnBK,MAAIN,QAAQ1D,EAAO2D,GAAUhC,YAKlBsC,EAAoB,YAM1B,IALLC,EAKI,EALJA,IACcC,EAIV,EAJJC,aAII,EAC8BC,YAAgB,aAAa,GAD3D,mBACGC,EADH,KACcC,EADd,OAEmBC,mBAAYL,GAA5BC,EAFH,sBAI4BI,mBAAwB,MAJpD,mBAIGb,EAJH,KAIac,EAJb,OAK4BD,oBAAS,GALrC,mBAKG1B,EALH,KAKa4B,EALb,OAMgCL,YAClCH,EACAP,EACII,EAAazD,KAAKmC,UAAU2B,GAAeT,GAC3CrD,KAAKmC,UAAU2B,IAVjB,mBAMGO,EANH,KAMeC,EANf,OAawCJ,mBAAYJ,GAbpD,mBAaGS,EAbH,KAamBC,EAbnB,KAeE9B,EAAc+B,mBAAQ,WAC1B,IACE,IAAKJ,EAAY,OAAO,EACxBrE,KAAKC,MAAMoE,GACX,MAAOK,GACP,OAAO,EAET,OAAO,IACN,CAACL,IAEJM,aAAS,WACFjC,IACH8B,EAAkBH,EAAarE,KAAKC,MAAMoE,GAAcP,GACxDM,GAAY,OAIhBQ,aAAgB,WACd,GAAKpC,IAAYwB,KACbtB,GAAgBW,GAApB,CACA,IAAMwB,EAAQ7E,KAAKmC,UAAUoC,GAC7BD,EAAcjB,EAAWI,EAAaoB,EAAOxB,GAAYwB,MACxD,CAACN,IAEJ,IAAMO,EAAeC,uBACnB,SAACC,GACC,IAAItC,EAAJ,CACA,IAAMuC,EAAOxB,EACXY,GAAcrE,KAAKmC,UAAU2B,GAC7BkB,GAEFV,EAAcW,GACdd,EAAYa,MAEd,CAACX,EAAYC,EAAeR,EAAcpB,IAGtCwC,EAAcH,uBAClB,SAAC1B,GACC,IAAKX,EAAa,OAAO,EACzB,IACE,IAAM6B,EAjEO,SAAC7E,EAAe2D,GAAhB,OACnBK,MAAIyB,QAAQzF,EAAO2D,GAAUhC,SAAS+D,MAAIC,MAgEbC,CACrBjB,GAAcrE,KAAKmC,UAAU2B,GAC7BT,GAMF,OAJAmB,EAAkBxE,KAAKC,MAAMsE,IAC7BJ,EAAYd,GACZe,GAAY,IAEL,EACP,MAAOM,GACP,OAAO,KAGX,CAACZ,EAAcO,EAAY3B,IAGvB6C,EAAYR,uBAAY,WACvBrC,IACL0B,GAAY,GACZD,EAAY,MACZK,EAAkBV,MACjB,CAACpB,EAAaoB,IAEjB,MAAO,CACLpB,cACAwC,cACAK,YACAV,MAAON,EACPiB,SAAUhB,EACVM,eACAtC,WACAwB,YACAC,eACAZ,c,iCCzGW,QAA0B,mC,sLCKKjB,aAAS,WAAO,IAAD,EAChC8B,mBAAS,iBAAkBuB,WAA/CC,EADoD,sBAGT3B,YAChD,sBACA,QALyD,mBAGpD4B,EAHoD,KAGjCC,EAHiC,OAOvB1B,mBAAmC,MAPZ,mBAOpD2B,EAPoD,KAOxCC,EAPwC,KASrDC,EAAiBhB,sBAAW,sBAAC,8BAAAiB,EAAA,kEAG5BN,GACAO,YAAM,mBAAoBR,UAAUS,cAJR,uBAM7BJ,EAAc,IANe,0CAUNL,UAAUS,aAAaC,mBAVjB,OAUzBC,EAVyB,OAYzBP,EAAaO,EAAWC,QAC5B,SAACC,GAAD,MAAuD,eAAhBA,EAAOC,QAGhDT,EAAcD,GAhBiB,kDAkB/BW,MAAM,mCAlByB,0DAoBhC,CAACd,IAgBJ,OAdAe,qBAAU,WACRV,MACC,CAACL,EAAkBK,IAEtBU,qBAAU,WAES,OAAfZ,GACsB,SAAtBF,GACCe,aAAI,qBAAGC,WAA4BhB,IAAmBE,IAEvDD,EAAqB,UAEtB,CAACC,EAAYD,EAAsBD,IAE/B,CACLA,kBAAoBe,aAClB,qBAAGC,WAA4BhB,IAC/BE,GAAc,IAGZF,EADA,OAEJE,WAAYA,GAAc,GAC1BD,uBACAF,uB,mBAtDUkB,E,KAAmBC,E,8ICMpBC,EAAQ,SAAC,GAMR,IALZjC,EAKW,EALXA,MACAkC,EAIW,EAJXA,SACAC,EAGW,EAHXA,YACAC,EAEW,EAFXA,SACGC,EACQ,6DACX,OACE,cAACC,EAAD,aACEtC,MAAOA,EACPmC,YAAaA,EACbC,SAAUA,EACVF,SAAU,SAACrC,GACTqC,GAAYA,EAASrC,EAAE0C,OAAOvC,QAEhCwC,OAAK,GACDH,KAKGC,EAAcG,YAAOC,IAAPD,CAAH,6W,gCChCxB,8EAMaE,EAAQ,SAACC,GAAD,OACnBC,IAAED,GAAME,OAAOC,IAAKpH,SAASqH,iB,8KCPhB,MAA0B,iC,0BCA1B,MAA0B,qCCA1B,MAA0B,4C,OCc5BC,EAAW,SAAC,GAAoD,IAAlDf,EAAiD,EAAjDA,SAAUgB,EAAuC,EAAvCA,QAAuC,IAA9Bd,gBAA8B,SACpEe,EAAc,WAClBjB,GAAYA,GAAUgB,IAGxB,OAAOE,YACL,cAACC,EAAD,CACEH,QAASA,EACTI,QAASH,EACTI,MAAM,UACNnB,SAAUA,IAGZ,cAACoB,EAAD,CACEC,IAAKP,EAAUQ,EAAkBC,EACjCL,QAASlB,OAAWwB,EAAYT,KAKhCK,EAAcf,IAAOoB,IAAV,iHAOXR,EAAiBZ,YAAOqB,IAAPrB,CAAH,yM,0CCbPsB,EAAc,SAAC,GASd,IARZC,EAQW,EARXA,aAQW,IAPX5B,gBAOW,SANX6B,EAMW,EANXA,gBAMW,IALXC,iBAKW,SAJXC,EAIW,EAJXA,aAIW,IAHXC,qBAGW,MAHK,EAGL,EAFXC,EAEW,EAFXA,0BACAC,EACW,EADXA,YAEQC,EAAMC,YAAe,WAArBD,EACA5I,EAAa8I,cAAb9I,SAEFiH,EAAOhD,mBAAQ,kBAAM+C,YAAMqB,EAAaU,UAAS,CAACV,IAElDW,EAAQ/E,mBACZ,kBAAMnE,YAAauI,EAAcrI,KACjC,CAACqI,EAAcrI,IAGXiJ,EAAY9I,YAAO+I,IAAaC,MAAO,OAAQd,GAErD,OACE,mCACE,eAACe,EAAD,WACE,eAACC,EAAD,WACGf,GAAmB,cAACgB,EAAD,CAAMxB,IAAKQ,IAC9B7B,EACC,cAAC8C,EAAD,CAAOzB,IAAK0B,MAEZ,cAAC,IAAD,CAAMC,GAAG,IAAT,SACE,cAACF,EAAD,CAAOzB,IAAK0B,WAIlB,eAACE,EAAD,WACGT,IAAcC,IAAaS,KAC1B,qCACE,cAACC,GAAD,UAAMhB,EAAE,mCACR,eAACiB,GAAD,WAAUjB,EAAE,oBAAZ,UAGF,cAACgB,GAAD,UAAMhB,EAAE,oCAEV,cAACkB,EAAD,UACE,cAACxD,EAAA,EAAD,CAAOjC,MAAO2E,GAAS,GAAIvC,UAAQ,MAErC,cAACsD,GAAD,UAAO9C,EAAK+C,OAAO,yBAErB,cAACC,EAAD,UACE,cAACC,EAAD,UACE,cAACC,GAAD,CAAMrC,IAAKsC,QAGf,eAACC,GAAD,WACE,cAAC,IAAD,CAAeC,UAAQ,EAAC3C,QAASgB,EAAjC,SACGM,IAAcC,IAAaS,KACxBf,EAAE,kBACFA,EAAE,kBAER,cAAC2B,GAAD,UAAe3B,EAAE,+BACjB,eAAC4B,GAAD,WACE,eAACC,GAAD,WACE,cAAC,EAAD,CACElD,QAASgB,EACThC,SAAUiC,EACV/B,SAAUiE,YAAMlC,KAEjBI,EAAE,+BAAgC,CAAE+B,KAAMlC,OAE7C,cAACmC,GAAD,CAAQjD,QAASe,EAAjB,SACGE,EAAE,sCASXQ,EAActC,IAAO+D,IAAV,0KASXvB,EAAOxC,IAAOoB,IAAV,6CAIJmB,EAASvC,IAAO+D,IAAV,uIAQNtB,EAAQzC,IAAOoB,IAAV,sGAOL4B,EAAehD,IAAO+D,IAAV,gDAIZnB,EAAiB5C,IAAO+D,IAAV,qIAQdZ,EAAcnD,IAAO+D,IAAV,oFAMXX,EAAmBpD,IAAO+D,IAAV,4IAQhBV,GAAOrD,IAAOoB,IAAV,6FAMJ0B,GAAM9C,IAAO+D,IAAV,0FAMHhB,GAAU/C,YAAO8C,GAAP9C,CAAH,gDAIPiD,GAAOjD,IAAO+D,IAAV,sEAKJL,GAAY1D,IAAO+D,IAAV,0JASTJ,GAAkB3D,IAAO+D,IAAV,8GAOfD,GAAS9D,IAAO+D,IAAV,+IAQNN,GAAezD,IAAO+D,IAAV,sEAKZR,GAAcvD,IAAO+D,IAAV,gE,4PC/LJC,EAAS,SAAC,GAST,IARZC,EAQW,EARXA,YACAC,EAOW,EAPXA,SACAC,EAMW,EANXA,WACAC,EAKW,EALXA,SACAlC,EAIW,EAJXA,MACA/B,EAGW,EAHXA,KACAkE,EAEW,EAFXA,QACAlC,EACW,EADXA,UAEQL,EAAMC,YAAe,WAArBD,EACFwC,EAASnH,mBAAQ,kBAAM+C,IAAMmE,KAAU,CAACA,IAExCE,EAAaF,EAAU,IAAM,IAEnC,OACE,eAAC,IAAD,CACEG,OAAQP,EACRQ,eAAgBP,EAChBQ,MAAO,CACLC,QAAS,CACPC,gBAAiB,sBAEnBC,QAAS,CACPC,QAAS,OACTC,OAAQ,IACRC,QAAS,OACTC,aAAc,MACdC,MAAO,QACPC,SAAU,WACVC,IAAK,MACLC,KAAM,MACNC,UAAW,wBACXC,OACEpD,IAAcC,IAAaS,KAA3B,UACO0B,EAAa,GADpB,gBAEOA,EAFP,MAGFiB,SAAU,WAGdC,aAAa,EAxBf,UA0BE,cAACC,EAAD,UACE,cAACjD,EAAD,CAAOzB,IAAK2E,IAAY9E,QAASqD,MAElC/B,IAAcC,IAAaS,KAC1B,qCACE,cAACC,EAAD,UAAMhB,EAAE,mCACR,eAACiB,EAAD,WAAUjB,EAAE,oBAAZ,UAGF,cAACgB,EAAD,UAAMhB,EAAE,oCAEV,cAACtC,EAAD,UAAQ0C,IACR,cAACe,EAAD,UAAO9C,EAAK+C,OAAO,sBACnB,cAAC0C,EAAD,UAAQ9D,EAAE,oCACTuC,GACC,cAACX,EAAD,UACG5B,EAAE,qBAAsB,CAAE+D,KAAMvB,EAAOpB,OAAO,mBAGnD,cAAC,IAAD,CAAoBrC,QAASsD,EAA7B,SACGrC,EAAE,sBAEL,eAACgE,EAAD,CAAajF,QAASuD,EAAtB,cAAkCtC,EAAE,8BAKpCW,EAAQzC,IAAOoB,IAAV,6CAILsE,EAAe1F,IAAO+D,IAAV,mHAOZ6B,EAAQ5F,IAAO+D,IAAV,+GAOL+B,EAAc9F,YAAO+F,IAAP/F,CAAH,0HAMX8C,EAAM9C,IAAO+D,IAAV,uEAKHhB,EAAU/C,YAAO8C,EAAP9C,CAAH,gDAIPiD,EAAOjD,IAAO+D,IAAV,uEAKJvE,EAAQQ,IAAO+D,IAAV,kOAYLL,EAAY1D,IAAO+D,IAAV,2F,6CCjIFiC,EAAaC,sBAAW,SAACC,EAAYC,GAAc,IAAD,EACjBvJ,mBAAwB,MADP,mBACtDwJ,EADsD,KACtCC,EADsC,KAuB7D,OAnBAC,8BAAoBH,GAAK,iBAAO,CAC9BI,KAAM,WACJ,IAAMC,EAAMC,SAASC,cACnB,qBAEGF,GACLH,EACE,IAAIM,IAAOH,EAAK,CACdI,QAAQ,EACRC,KAAM,MAIZC,SAAU,WACR,OAAKV,EACEA,EAAeW,UADM,QAM9B,cAACC,EAAD,UACE,qBAAKC,UAAU,0BAKfD,EAAUhH,IAAO+D,IAAV,ygBCpBAmD,EAAgB,SAAC,GAKhB,IAJZjD,EAIW,EAJXA,YACAC,EAGW,EAHXA,SACAiD,EAEW,EAFXA,UACAhH,EACW,EADXA,KAEQ2B,EAAMC,YAAe,WAArBD,EACAsF,EAAgBC,cAAhBD,YACFE,EAAgBC,iBAA0B,MAHrC,EAIuC3K,oBAAS,GAJhD,mBAIJ4K,EAJI,KAIeC,EAJf,OAK2C7K,oBAAS,GALpD,mBAKJ8K,EALI,KAKiBC,EALjB,KA2BX,OACE,eAAC,IAAD,CACEnD,OAAQP,EACRQ,eAAgBP,EAChBQ,MAAO,CACLC,QAAS,CACPC,gBAAiB,sBAEnBC,QAAS,CACPC,QAAS,OACTC,OAAQ,IACRC,QAAS,OACTC,aAAc,MACdC,MAAO,QACPC,SAAU,WACVC,IAAK,MACLC,KAAM,MACNC,UAAW,wBACXC,OAAQ,QACRC,SAAU,WAGdC,aAAa,EACbmC,YA3Ce,WACjBN,EAAcO,SAAWP,EAAcO,QAAQtB,QAoB/C,UAwBE,cAAC,GAAD,UACE,cAAC,EAAD,CAAOvF,IAAK2E,IAAY9E,QAASqD,MAEnC,cAAC,GAAD,UAAQpC,EAAE,2BACV,cAACgG,GAAD,UACE,cAAC9B,EAAD,CAAYG,IAAKmB,MAEnB,cAAC,IAAD,CAAoBzG,QAhDF,WACpB,IAAMkH,EAAYT,EAAcO,QAC5BP,EAAcO,QAAQf,WACtBkB,OAEEC,EAAiB/H,YAAM6H,GAAWG,QAAQ,UAE5CD,EAAeE,SAAShI,EAAK+H,QAAQ,WACvCT,GAAqB,GACZQ,EAAeG,QAAQhB,GAChCO,GAAuB,GAEvBR,EAAUc,IAoCV,SACGnG,EAAE,2BAEL,cAACuG,EAAA,EAAD,CACEC,KAAMd,EACNe,iBAAkB,IAClBC,QAAS,WACPf,GAAqB,IAEvBgB,aAAc,CAAEC,SAAU,MAAOC,WAAY,UAN/C,SAQE,cAACC,EAAA,EAAD,CAAOC,UAAW,EAAGC,QAAQ,SAASC,SAAS,QAA/C,SACGjH,EAAE,6CAGP,cAACuG,EAAA,EAAD,CACEC,KAAMZ,EACNa,iBAAkB,IAClBC,QAAS,WACPb,GAAuB,IAEzBc,aAAc,CAAEC,SAAU,MAAOC,WAAY,UAN/C,SAQE,cAACC,EAAA,EAAD,CAAOC,UAAW,EAAGC,QAAQ,SAASC,SAAS,QAA/C,SACGjH,EAAE,qCAOPW,EAAQzC,IAAOoB,IAAV,6CAILsE,GAAe1F,IAAO+D,IAAV,4FAMZ6B,GAAQ5F,IAAO+D,IAAV,4FAML+D,GAAoB9H,IAAO+D,IAAV,0IChHViF,GAAa,SAAC,GAAiD,IAA/CC,EAA8C,EAA9CA,GAAIC,EAA0C,EAA1CA,QAASC,EAAiC,EAAjCA,UAAWC,EAAsB,EAAtBA,SAC3ChC,EAAgBC,cAAhBD,YACAiC,EAAoBtO,cAApBsO,gBAFiE,EAGnBzM,oBAAS,GAHU,mBAGlE0M,EAHkE,KAG7CC,EAH6C,KAIjErQ,EAAa8I,cAAb9I,SAEFqI,EAAepE,mBACnB,kBAAMkM,EAAgBJ,KACtB,CAACA,EAAII,IAGDnH,EAAQ/E,mBACZ,kBAAOoE,EAAevI,YAAauI,EAAcrI,GAAY,KAC7D,CAACqI,EAAcrI,IAWXiJ,EAAY9I,YAChB+I,IAAaC,MACb,OACAd,GAGF,OAAQA,EAGN,qCACE,cAAC,EAAD,CACE0C,YAAaiF,IAAYI,EACzBpF,SAAU,WACRqF,GAAuB,GACvBJ,KAEFhF,WAxBiB,WACrBiF,EAAShC,IAwBLhD,SAAU,WACRmF,GAAuB,IAEzBrH,MAAOA,GAAS,GAChB/B,KAAMD,YAAMqB,EAAaU,QACzBoC,QAAS9C,EAAa8C,QACtBlC,UAAWA,IAEb,cAAC,EAAD,CACE8B,YAAaiF,GAAWI,EACxBpF,SAAU,WACRqF,GAAuB,GACvBJ,KAEFhC,UAnCmB,SAACtB,GACxBuD,EAASvD,IAmCL1F,KAAMD,YAAMqB,EAAaU,aAzB7B,+B,s+ZC1CQG,E,8GAAAA,K,cAAAA,E,aAAAA,M,KAsBZ,IAAMoH,EAAWC,YAAK,CAAC,UAAW,SAAU,SAAU,OAAQ,iB,EAEI3O,aAChE,WAAO,IACGsM,EAAgBC,cAAhBD,YADJ,EAWA/K,YAAmC,CACrCC,IAAK,oBACLE,aAAc,KAVDZ,EAHX,EAGFgC,YACWpC,EAJT,EAIFyC,UACOyL,EALL,EAKFnM,MACUoM,EANR,EAMFzL,SACcvC,EAPZ,EAOF6B,aACAtC,EARE,EAQFA,SACAE,EATE,EASFA,YACAW,EAVE,EAUFA,SAMI6N,EAAyBnM,uBAC7B,SAACwL,GACCU,GAAoB,SAACE,GAAD,OAClBC,aAAO,qBAAGb,KAA4BA,IAAIY,QAG9C,CAACF,IAGGI,EAAyBtM,uBAC7B,SAACuM,GACCL,GAAoB,SAACE,GAAD,mBAAC,eAEdL,EAASQ,IAFI,IAGhBC,UAAW7C,EAAY8C,cACvBjB,GAAIkB,iBAJY,mBAMfN,SAGP,CAACF,EAAqBvC,IAGlBgD,EAAwB3M,uBAC5B,SAACuM,GACC,IAAMK,EAAcb,EAASQ,GAEvBM,EAASC,aAAK,SAACC,GACnB,IAAMC,EAAcjB,EAASgB,GAC7B,OAAOE,YAAOL,EAAaI,KAC1Bf,GAEH,OAAKY,EAEEA,EAAOrB,GAFM,OAItB,CAACS,IAGH,MAAO,CACL9N,yBACAJ,uBACAkO,mBACAC,sBACAhO,0BACAT,WACAE,cACAW,WACA6N,yBACAG,yBACAK,4B,mBAnEQO,E,KAA6BpP,E,wVCrB/BqP,E,sIAAAA,K,oBAAAA,E,YAAAA,E,qBAAAA,M,KAaZ,IAAMC,EAAa,SAACb,GAAD,OACjBA,EAAOc,MAAK,SAACpM,EAAGqM,GAAJ,OACV7K,YAAMxB,EAAEuD,QAAQ+I,OAAOD,EAAE9I,QACrB,EACA/B,YAAMxB,EAAEuD,QAAQkG,SAAS4C,EAAE9I,QAC3B,GACC,M,EAGiDnH,aAAS,WAAO,IAChEsM,EAAgBC,cAAhBD,YAD+D,EAanE/K,YAAkC,CACpCC,IAAK,gBACLE,aAAc,KAZDlB,EAHwD,EAGrEsC,YACW5C,EAJ0D,EAIrEiD,UACOsD,EAL8D,EAKrEhE,MACU0N,EAN2D,EAMrE/M,SACc7C,EAPuD,EAOrEmC,aACAtC,EARqE,EAQrEA,SACAwB,EATqE,EASrEA,UACAC,EAVqE,EAUrEA,aACAvB,EAXqE,EAWrEA,YACAW,EAZqE,EAYrEA,SAKImP,EAAiBC,cAjBgD,EAmBjB1O,YACpD,2BACA,IArBqE,mBAmBhE2O,EAnBgE,KAmB3CC,EAnB2C,OAwBrBlO,mBAAQ,WAAO,IAAD,EACZoE,EAAa+J,QAI7D,SAACC,EAAKf,GAIJ,OAFEA,EAAKnG,SAAWnE,YAAMsK,EAAKnG,SAAS8D,SAASf,GAG3C,CACEoE,iBAAiB,CAAEhB,GAAH,mBAAYe,EAAIC,mBAChCC,oBAAoB,YAAKF,EAAIE,sBAE/B,CACED,iBAAiB,YAAKD,EAAIC,kBAC1BC,oBAAoB,CAAEjB,GAAH,mBAAYe,EAAIE,yBAG3C,CACED,iBAAkB,GAClBC,oBAAqB,KApBjBD,EADsD,EACtDA,iBAAkBC,EADoC,EACpCA,oBAwB1B,MAAO,CACLD,iBAAkBX,EAAWW,GAC7BC,oBAAqBZ,EAAWY,MAEjC,CAAClK,EAAc6F,IA7BVoE,EAxB+D,EAwB/DA,iBAAkBC,EAxB6C,EAwB7CA,oBA+B1BtM,qBAAU,WACR8L,GAAgB,SAACpB,GAAD,OACdA,EAAK9K,QACH,gBAAGkD,EAAH,EAAGA,OAAH,OACEmF,EAAYsE,KAAKzJ,EAAQ,SAAWmJ,GAAuB,YAGhE,CAAChE,EAAa6D,EAAiBG,IAElC,IAAMO,EAAqBlO,uBACzB,SAACuM,GACCiB,GAAgB,SAACpB,GAAD,OAAWG,GAAX,mBAAsBH,SAExC,CAACoB,IAGG5B,EAAkB5L,uBACtB,SAACwL,GAAD,OAAgBsB,aAAK,qBAAGtB,KAA4BA,IAAI1H,KACxD,CAACA,IAGGqK,EAAqBnO,uBACzB,SAACwL,EAAYtL,GACXsN,GAAgB,SAACpB,GACf,IAAMgC,EAAQC,aAAU,qBAAG7C,KAA4BA,IAAIY,GAC3D,OAAIgC,EAAQ,EAAUhC,EACfkC,YACLF,GACA,SAACG,GAAD,mBAAC,eAAwBA,GAAkBrO,KAC3CkM,QAIN,CAACoB,IAGGgB,EAAqBxO,uBACzB,SAACwL,GACCgC,GAAgB,SAACpB,GAAD,OACdC,aAAO,qBAAGb,KAA4BA,IAAIY,QAG9C,CAACoB,IAGGiB,EAAgBzO,uBACpB,SAAC0O,GACC,IAAMlD,EAAKkB,cACLiC,EAAMlM,cAEN8J,EAAM,2BACPmC,GADO,IAEVlD,KACAhH,OAAQmK,EAAIlC,cACZ7F,QAAS+H,EAAIC,IAAI,EAAG,QAAQnC,gBAG9ByB,EAAmB3B,GAEnBkB,EAAeoB,KAAK,CAAEC,SAAS,YAAD,OAActD,GAAMuD,MAAOxC,MAE3D,CAAC2B,EAAoBT,IAGvB,MAAO,CACL3J,eACA0J,kBACAQ,sBACAD,mBACAG,qBACAtC,kBACAuC,qBACAK,qBACAjR,mBACAM,qBACAD,sBACAH,WACAwB,YACAC,eACAvB,cACAiQ,yBACAD,sBACArP,WACAmQ,oB,mBA1IUO,E,KAAyB1R,E,sKCRxB2R,EAdA,CACbC,SACAC,S,OACAC,YAAaC,EACbC,UAAWC,EACXC,aAAcC,EACdC,QACAC,aACAC,UACAC,qBAAsBC,EACtBC,eAAgBC,EAChBC,sB,yFCGahB,EAdA,CACbC,SACAC,S,OACAC,YAAaC,EACbC,UAAWC,EACXC,aAAcC,EACdC,QACAC,aACAC,UACAC,qBAAsBC,EACtBC,eAAgBC,EAChBC,sB,QChBFpN,IACGqN,IAAIC,KACJrH,KAAK,CACJsH,WAAS,mBACNnU,IAAa,SAAWoU,GADlB,cAENpU,IAAY,GAASqU,GAFf,GAITC,IAAKtU,IAAa,SAClBuU,YAAavU,IAAa,SAC1BwU,cAAe,CACbC,aAAa,GAEfC,OAAO,I,6MCbEC,GAAc,WACzB,IAD+B,EAE+BzR,oBAAS,GAFxC,mBAExB0R,EAFwB,KAEFC,EAFE,KAa/B,OATApP,qBAAU,WACR,IAAMqP,EAAQC,YAAW,kBAAMF,GAA8B,KAJjD,KAOZ,OAAO,WACLG,aAAaF,OAIVF,EACL,eAACK,GAAD,UACE,eAAC3H,GAAD,UACE,eAAC4H,GAAA,EAAD,QAGF,MAGAD,GAAa3O,KAAO+D,IAAV,mZAaViD,GAAUhH,KAAO+D,IAAV,gG,mECzCE,OAA0B,sC,SCkB5B8K,GAAiB,SAAC,GAMjB,IALZ5K,EAKW,EALXA,YACAC,EAIW,EAJXA,SACAiD,EAGW,EAHXA,UACA2H,EAEW,EAFXA,sBACA3O,EACW,EADXA,KAEQ2B,EAAMC,aAAe,WAArBD,EADG,EAEqClF,mBAC9CkS,GAHS,mBAEJC,EAFI,KAEcC,EAFd,KAMX7P,qBAAU,WACR6P,EAAoBF,KACnB,CAACE,EAAqBF,IAEzB,IAIMxK,EAASnH,mBAAQ,kBAAMgD,EAAKkM,IAAI0C,EAAkB,UAAS,CAC/D5O,EACA4O,IAGF,OACE,gBAAC,KAAD,CACEvK,OAAQP,EACRQ,eAAgBP,EAChBQ,MAAO,CACLC,QAAS,CACPC,gBAAiB,sBAEnBC,QAAS,CACPC,QAAS,OACTC,OAAQ,IACRC,QAAS,OACTC,aAAc,MACdC,MAAO,QACPC,SAAU,WACVC,IAAK,MACLC,KAAM,MACNC,UAAW,wBACXC,OAAQ,QACRC,SAAU,WAGdC,aAAa,EArBf,UAuBE,eAACC,GAAD,UACE,eAACjD,GAAD,CAAOzB,IAAK2E,KAAY9E,QAASqD,MAEnC,eAAC0B,GAAD,UAAQ9D,EAAE,iCACV,eAACmN,GAAD,CAAiBhG,GAAG,SAApB,SACE,eAACiG,GAAD,UACG,CACC,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,IACAC,KAAI,SAACtL,GAAD,OACJ,gBAACuL,GAAD,CACEvO,QAAS,WACPmO,EAAoBnL,IAFxB,eAMKA,EACF/B,EAAE,aACFiN,IAAqBlL,GAAQ,eAACwL,GAAD,CAAcrO,IAAKsO,OAJ5CzL,UASb,gBAAC0L,GAAD,WACE,+BAAMzN,EAAE,mBAAoB,CAAE+D,KAAM1F,EAAK+C,OAAO,mBAChD,+BACGpB,EAAE,wBAAyB,CAAE+D,KAAMvB,EAAOpB,OAAO,sBAGtD,eAAC,KAAD,CAAoBrC,QApFF,WACpBsG,EAAU4H,IAmFR,SACGjN,EAAE,+BAMLW,GAAQzC,KAAOoB,IAAV,6CAILsE,GAAe1F,KAAO+D,IAAV,4FAMZ6B,GAAQ5F,KAAOwP,GAAV,iHAOLP,GAAkBjP,KAAO+D,IAAV,oFAMfmL,GAAWlP,KAAOyP,GAAV,8EAMRL,GAAepP,KAAO0P,GAAV,0GAMZH,GAAcvP,KAAO+D,IAAV,2FAMXsL,GAAerP,KAAOoB,IAAV,kG,UCvJLuO,GAAU,SAAC,GAAgC,IAA9BnO,EAA6B,EAA7BA,gBAClB0J,EAAiBC,cACflC,EAAO2G,cAAP3G,GACAuD,EAAUqD,cAAVrD,MAH6C,EAILzR,eAAxC6Q,EAJ6C,EAI7CA,mBAAoBvC,EAJyB,EAIzBA,gBAJyB,EAMGzM,oBAAS,GANZ,mBAM9CkT,EAN8C,KAMxBC,EANwB,OAOLnT,oBAAS,GAPJ,mBAO9CoT,EAP8C,KAO5BC,EAP4B,KAS/C1O,EAAepE,mBAAQ,kBAAOqP,GAAgBnD,EAAgBJ,KAAM,CACxEuD,EACAnD,EACAJ,IAGF9J,qBAAU,WACHoC,GAAc2J,EAAegF,QAAQ,OACzC,CAAC3O,EAAc2J,IAjBmC,MAmBnBtO,oBAChC2E,IAAgBqC,YAAMrC,EAAa8C,UApBgB,mBAmB9C5C,EAnB8C,KAmBnCC,EAnBmC,OAsBX9E,mBACxC2E,GAAgBA,EAAa8C,QACzBnE,aAAMqB,EAAa8C,SAASqH,KAAKnK,EAAaU,OAAQ,QACtD,GAzB+C,mBAsB9CN,EAtB8C,KAsB/BwO,EAtB+B,KA4B/ClO,EAAS9E,mBACb,kBAAOoE,EAAeA,EAAaU,OAAS/B,eAAQgK,gBACpD,CAAC3I,IA4BH,OAPApC,qBAAU,WACR,IAAMmF,EAASpE,aAAM+B,GAAQoK,IAAI1K,EAAe,QAChDiK,EAAmB3C,EAAI,CACrB5E,QAAS5C,EAAY6C,EAAO4F,mBAAgB/I,MAE7C,CAACM,EAAWE,EAAeiK,EAAoB3C,EAAIhH,IAE/CV,EACL,uCACE,eAACD,GAAA,EAAD,CACEC,aAAcA,EACdC,gBAAiBA,EACjBC,UAAWA,EACXC,aAAcA,EACdC,cAAeA,EACfC,0BAA2B,WACzBmO,GAAwB,IAE1BlO,YAAa,WACXoO,GAAoB,MAGxB,eAAC,GAAD,CACEhM,YAAa6L,EACb5L,SAAU,WACR6L,GAAwB,IAE1B5I,UA7CyB,SAAC5J,GAC9B4S,EAAiB5S,GACjBwS,GAAwB,IA4CpBjB,sBAAuBnN,EACvBxB,KAAMD,aAAM+B,KAEd,eAAC+G,GAAA,EAAD,CACEC,GAAIA,EACJC,QAAS8G,EACT7G,UAAW,WACT8G,GAAoB,IAEtB7G,SA5Cc,SAACjJ,GACnByL,EAAmB3C,EAAI,CACrB5E,QAASlE,EAAK+H,QAAQ,UAAUgC,gBAPlC6F,GAAwB,GACxBE,GAAoB,GACpB/E,EAAeoB,KAAK,WAmDpB,gC,iDCvFE8D,GAAcC,IAAMC,MAAK,kBAAM,6EAC/BC,GAAWF,IAAMC,MAAK,kBAAM,sEAC5BE,GAAgBH,IAAMC,MAAK,kBAAM,8EACjCG,GAAWJ,IAAMC,MAAK,kBAAM,8EAC5BI,GAAaL,IAAMC,MAAK,kBAAM,sEAC9BK,GAAaN,IAAMC,MAAK,kBAAM,kCAC9BM,GAAQP,IAAMC,MAAK,kBAAM,sEACzBO,GAAqBR,IAAMC,MAC/B,kBAAM,kCAEFQ,GAAsBT,IAAMC,MAChC,kBAAM,8EAGKS,GAAM,YC1BS,WAAO,IAAD,EACCtU,aAC/B,gBACA,MAFSuU,EADqB,oBAMhC7R,qBAAU,WAER6R,MACC,CAACA,IAT4B,MAY9BjW,eADMG,EAXwB,EAWxBA,SAAU+P,EAXc,EAWdA,gBAAiB1J,EAXH,EAWGA,aAAcxF,EAXjB,EAWiBA,SAGjDkV,cAAwB,WACtBhG,GAAgB,SAACpB,GAAD,OACdA,EAAKsF,KAAI,SAAC3E,GACR,OAAI0G,aAAI,KAAM1G,GAAcA,EACrB,2BAAMA,GAAb,IAAoCvB,GAAIkB,yBAG3C,CAACjP,EAAUqG,EAAc0J,IArBI,MAuBiB1P,eAAzCI,EAvBwB,EAuBxBA,wBAAyBP,EAvBD,EAuBCA,YAEjC+D,qBAAU,WACJpD,IAAaX,GACfO,EAAwBI,KAEzB,CAACA,EAAUJ,EAAyBP,IDFvC+V,GADuB,MAEyB1U,aAC9C,qBACA,GAJqB,mBAEhB2U,EAFgB,KAEEC,EAFF,OAMuB5U,aAC5C,kBACA,MARqB,mBAMhB+E,EANgB,KAMC8P,EAND,OAUiBpV,eAAhCL,EAVe,EAUfA,KAAMX,EAVS,EAUTA,SAAUE,EAVD,EAUCA,YAEhBmR,EAAasD,cAAbtD,SACFrB,EAAiBC,cAEjBoG,EAAa9T,uBAAY,WACZ,cAAb8O,GAAyC,mBAAbA,GAA+B1Q,MAC9D,CAACA,EAAM0Q,IAEVpN,qBAAU,WAER,OADArG,OAAO0Y,iBAAiB,OAAQD,GACzB,WACLzY,OAAO2Y,oBAAoB,OAAQF,MAEpC,CAACA,IAEJ,IAAMG,EAAUvU,mBAGd,iBAAM,CACJ,CACEwU,cAAc,EACdC,MAAO,CAAEC,OAAO,EAAMC,KAAM,aAC5BC,UAAW,eAACtB,GAAD,CAAUY,oBAAqBA,KAE5C,CACEM,cAAc,EACdC,MAAO,CAAEC,OAAO,EAAMC,KAAM,UAC5BC,UAAW,eAACnB,GAAD,KAEb,CACEe,cAAc,EACdC,MAAO,CACLC,OAAO,EACPC,KAAM,KAERC,UAAW,eAACrB,GAAD,KAEb,CACEiB,cAAc,EACdC,MAAO,CACLC,OAAO,EACPC,KAAM,gBAERC,UAAW,eAAC,GAAD,CAASvQ,gBAAiBA,KAEvC,CACEmQ,cAAc,EACdC,MAAO,CACLC,OAAO,EACPC,KAAM,gBAERC,UAAW,eAAC3B,GAAD,KAEb,CACEuB,cAAc,EACdC,MAAO,CACLC,OAAO,EACPC,KAAM,eAERC,UAAW,eAACpB,GAAD,KAEb,CACEgB,cAAc,EACdC,MAAO,CACLC,OAAO,EACPC,KAAM,aAERC,UAAW,eAACxB,GAAD,KAEb,CACEoB,cAAc,EACdC,MAAO,CACLC,OAAO,EACPC,KAAM,kBAERC,UAAW,eAACvB,GAAD,KAEb,CACEmB,cAAc,EACdC,MAAO,CACLC,OAAO,EACPC,KAAM,uBAERC,UACE,eAAClB,GAAD,CACErP,gBAAiBA,EACjB8P,mBAAoBA,KAI1B,CACEK,cAAc,EACdC,MAAO,CACLC,OAAO,EACPC,KAAM,wBAERC,UAAW,eAACjB,GAAD,QAGf,CAACtP,EAAiB8P,EAAoBD,IAmCxC,OA9BAlS,qBAAU,WACH/D,IACAF,GAAyB,WAAbqR,GACfrB,EAAegF,QAAQ,UAErBhV,GAAyB,WAAbqR,GACdrB,EAAegF,QAAQ,QAExB,CAAC9U,EAAaF,EAAUgQ,EAAgBqB,IAE3CpN,qBAAU,WACHiS,GAAiC,cAAb7E,GACvBrB,EAAegF,QAAQ,aAErBkB,GAAiC,cAAb7E,GACtBrB,EAAegF,QAAQ,OAExB,CAACkB,EAAkBlG,EAAgBqB,IAEtCpN,qBAAU,WACSC,aAAI,YAAgB,IAAbwS,EAAY,EAAZA,MACtB,QAAKA,EAAME,OACHlO,YAAMoO,YAAUzF,EAAUqF,MACjCF,IAGDxG,EAAegF,QAAQ,OAExB,CAAChF,EAAgBqB,EAAUmF,IAG5B,uCACE,eAACO,GAAD,IACCP,EAAQvC,KAAI,gBAAGyC,EAAH,EAAGA,MAAOG,EAAV,EAAUA,UAAV,SAAqBJ,eACfzW,EACf,eAAC,IAAMgX,SAAP,GAAqBC,OAAOP,EAAME,OAElC,wBAAC,IAAD,2BAAWF,GAAX,IAAkBtV,IAAK6V,OAAOP,EAAME,SACjC,gBAAGM,EAAH,EAAGA,MAAH,OACC,eAACC,GAAA,EAAD,CACEC,GAAa,MAATF,EACJG,QAAS,IACTC,WAAW,OACXC,eAAa,EAJf,SAME,sBAAKxL,UAAU,OAAf,SACE,eAAC,WAAD,CAAUyL,SAAU,eAAC,GAAD,IAApB,SAAsCX,kBAWlDE,GAAcU,aAAH,ylC,4BElMXC,GAAcC,QACW,cAA7B/Z,OAAOqT,SAAS2G,UAEe,UAA7Bha,OAAOqT,SAAS2G,UAEhBha,OAAOqT,SAAS2G,SAASV,MACvB,2DA2CN,SAASW,GAAgBC,EAAeC,GACtC9U,UAAU+U,cACPC,SAASH,GACTI,MAAK,SAACC,GACLA,EAAaC,cAAgB,WAC3B,IAAMC,EAAmBF,EAAaG,WACd,MAApBD,IAGJA,EAAiBE,cAAgB,WACA,cAA3BF,EAAiB/G,QACfrO,UAAU+U,cAAcQ,YAI1BC,QAAQC,IACN,+GAKEX,GAAUA,EAAOY,UACnBZ,EAAOY,SAASR,KAMlBM,QAAQC,IAAI,sCAGRX,GAAUA,EAAOa,WACnBb,EAAOa,UAAUT,WAO5BU,OAAM,SAACC,GACNL,QAAQK,MAAM,4CAA6CA,MCpFjE,IAAMC,GAAQC,YAAe,CAC3BC,QAAS,CACPC,QAAS,CAAEC,KAAMC,IAAK,MACtBC,UAAW,CAAEF,KAAMG,IAAO,SAI9BC,IAASC,OACP,eAAC,IAAMC,WAAP,UACE,eAAC,KAAD,UACE,eAAC,IAAD,CAAYC,SAAS,IAArB,SACE,eAACC,EAAA,EAAD,CAAeZ,MAAOA,GAAtB,SACE,eAAC,KAAD,UACE,eAAC,KAAD,UACE,eAAC,KAAD,UACE,eAAC,KAAD,UACE,eAAC,KAAD,UACE,eAAC,GAAD,sBAUlBxN,SAASqO,eAAe,SDjBnB,SAAkB7B,GACvB,GAA6C,kBAAmB9U,UAAW,CAGzE,GADkB,IAAI4W,IAAIC,IAAwBlc,OAAOqT,SAAS8I,MACpDC,SAAWpc,OAAOqT,SAAS+I,OAIvC,OAGFpc,OAAO0Y,iBAAiB,QAAQ,WAC9B,IAAMwB,EAAK,UAAMgC,IAAN,sBAEPpC,KAgEV,SAAiCI,EAAeC,GAE9CkC,MAAMnC,EAAO,CACXoC,QAAS,CAAE,iBAAkB,YAE5BhC,MAAK,SAACiC,GAEL,IAAMC,EAAcD,EAASD,QAAQG,IAAI,gBAEnB,MAApBF,EAASG,QACO,MAAfF,IAA8D,IAAvCA,EAAYG,QAAQ,cAG5CtX,UAAU+U,cAAcwC,MAAMtC,MAAK,SAACC,GAClCA,EAAasC,aAAavC,MAAK,WAC7Bta,OAAOqT,SAASyJ,eAKpB7C,GAAgBC,EAAOC,MAG1Bc,OAAM,WACLJ,QAAQC,IACN,oEAvFAiC,CAAwB7C,EAAOC,GAI/B9U,UAAU+U,cAAcwC,MAAMtC,MAAK,WACjCO,QAAQC,IACN,+GAMJb,GAAgBC,EAAOC,OCL/B6C,CAAmC,CACjCjC,SAAU,WACa/a,OAAOuU,QAAQ,iGACpBvU,OAAOqT,SAASyJ,a,iJChDM9a,aAAS,WAAO,IAAD,EACjB8B,mBAASsD,eADQ,mBAChDkH,EADgD,KACnC2O,EADmC,KAOvD,OAJAC,aAAsB,WACpBD,EAAe7V,iBACd,KAEI,CACLkH,kB,mBARU6O,E,KAAiB5O,E,sCCJxB,IAAK3N,EADZ,kC,SACYA,K,iBAAAA,E,SAAAA,M,gICCCwc,EAAgBlW,IAAOmW,OAAV,0VAYtB,SAACjQ,GAAD,OACAA,EAAMkQ,SAAN,kHAUA,SAAClQ,GAAD,OACAA,EAAM1C,SAAW,kDAAoD,MAQ5DuC,EAAqB/F,YAAOkW,EAAPlW,CAAH,2G,yJC3BWlF,aAAS,WAAO,IAAD,EACvB2B,YAC9B,WACA/C,IAAa,UAHwC,mBAChDR,EADgD,KACtCmd,EADsC,KAK/C/V,EAASyB,cAATzB,KAMR,OAJAnB,qBAAU,WACRmB,EAAKgW,eAAepd,KACnB,CAACoH,EAAMpH,IAEH,CACLA,SAAUA,GAAYQ,IAAa,SACnC2c,kB,mBAbUE,E,KAAiBvU,E,sCCPhB,QAA0B,yC","file":"static/js/main.adf917e1.chunk.js","sourcesContent":["import { SHA256 } from \"crypto-js\";\nimport { isEmpty, propOr, trim } from \"ramda\";\n\nimport { languageType } from \"./../constants/languageType\";\nimport { Location } from \"../hooks/useBookmark\";\n\nexport type DecodedJSON = {\n  hash: string;\n  metadata: { typeEn: string; typeZh: string };\n  nameEn: string;\n  nameZh: string;\n  type: string;\n  venueId?: string;\n};\n\nexport type EncodeParam = {\n  typeEn: string;\n  typeZh: string;\n  nameEn: string;\n  nameZh: string;\n  type: string;\n  venueCode: string;\n  venueID: string;\n};\n\nexport type EnhancedEncodeParam = EncodeParam & {\n  addressEn: string;\n  addressZh: string;\n  customImg: string | null;\n};\n\n\nexport const qrDecode = (input: string): DecodedJSON | null => {\n  if (!input.startsWith(\"HKEN:\")) return null;\n  const venueId = input.substring(6, 14);\n\n  const base64Data = input.substring(14);\n  const json: DecodedJSON = JSON.parse(\n    decodeURIComponent(escape(window.atob(base64Data)))\n  );\n\n  return { ...json, venueId };\n};\n\nexport const getVenueName = (\n  decodedJson: DecodedJSON | Location | null,\n  language: languageType\n) => {\n  if (!decodedJson) return \"\";\n\n  const trimmedZhName = trim(propOr(\"\", \"nameZh\", decodedJson));\n  const trimmedEnName = trim(propOr(\"\", \"nameEn\", decodedJson));\n  const venueId = trim(propOr(\"\", \"venueId\", decodedJson));\n\n  const chineseName = !isEmpty(trimmedZhName)\n    ? trimmedZhName\n    : !isEmpty(trimmedEnName)\n    ? trimmedEnName\n    : // used for taxi license\n      venueId;\n\n  const englishName = !isEmpty(trimmedEnName)\n    ? trimmedEnName\n    : !isEmpty(trimmedZhName)\n    ? trimmedZhName\n    : // used for taxi license\n      venueId;\n\n  return language === languageType.EN ? englishName : chineseName;\n};\n\n// http://blog.headuck.com/2020/11/19/%e3%80%8c%e5%ae%89%e5%bf%83%e5%87%ba%e8%a1%8c%e3%80%8d%e8%83%bd%e5%90%a6%e5%ae%89%e5%bf%83%e4%bd%bf%e7%94%a8%ef%bc%9f%ef%bc%88%e4%ba%8c%ef%bc%89/?__cf_chl_captcha_tk__=872d5919c48d1b25116c910c9de6c92e2b27facf-1613591353-0-AcPHoKV7LGMua5u8nTgTCYJXS9ZaCBaNSavb3A1E6F6HLsITHuJ9oA-SH4uu4UqnYiphktotJfPYaSUxQSmcfTk6y8iVJb873VgLU0qrdjxU6pZjBx5UxwqLDXom03026Z7EFmoHq70-CVMFVFPdTLHLXkIEYDFHZeqU0RE5KUjOwoJpOIFRLfsXwtRYGefQtspNIySZCg6u5sSDpxdRNc5dpOfdN2dybpb0G5T7j2URLhglnm7gH_chBuLNtSg-awOlrCk7Ljktwxte6lQj6AoNG2Cbqry8_-VvWdPX_1BdDfQ3apJvfUewJ6AIqHfDclXLrRril2vcMckHgrgvATQa4rcOr6AwzaZBcf90sfp3bnNQw59oszIkaV3Dzb8TrJlm4jWq42q3ijXTUua1WKWPDBzDBNl1SjLtar-AI3kzrgwFgaXkWkAxakLyTBJ7wszVHo0DHdCtE_Ozma4VkIZWZSF_gZ3dgBeAbBdwW8XTPsliqfplIeHsML8uJ2dAlxxPIcDDJ7a0gYr2YK4Jdl1ot568DfdMOuzhoMzy2OJKT9YFITl4k0Zger3M5kjSUPjgAOjB4j4p2M6kla2DERXhQj0IRi-sXG92OWEX5-Joa4x41eMqH6X6La4CaSfamwyN3gSwFtBfxvPA2V-Hss3Vj4zEgGs75oxSS7ZrUwbwOORal3VPYiWHzaif0qbWw93UBfuMgfsAyJnvAa5TntFPz3PZqpY9rg6gExJSaKFGBKAnOxyitUe1BDt0rW76u_qay7xF1WlCGCtIasM82E5nF1X51J_sXcAMwmZyG29b\nexport const getHash = (venueId: string) => {\n  const string = `HKEN${venueId}2020`;\n  return SHA256(string).toString();\n};\n\nexport const qrEncode = ({\n  typeEn,\n  typeZh,\n  nameEn,\n  nameZh,\n  type,\n  venueCode,\n  venueID,\n}: EncodeParam) => {\n  const json = {\n    metadata: !isEmpty(typeEn) || !isEmpty(typeZh) ? { typeEn, typeZh } : null,\n    nameZh,\n    nameEn,\n    type,\n    hash: getHash(venueID),\n  };\n\n  const base64Data = window.btoa(\n    unescape(encodeURIComponent(JSON.stringify(json)))\n  );\n\n  return `HKEN:${venueCode}${venueID}${base64Data}`;\n};\n","import constate from \"constate\";\n\nimport { useBookmarkLocation } from \"./useBookmark\";\nimport { useTravelRecord } from \"./useTravelRecord\";\n\nexport const [UseLockProvider, useLock] = constate(() => {\n  const {\n    lockTravelRecord,\n    unlocked: travelRecordUnlocked,\n    isEncrypted: travelRecordEncrypted,\n    encryptTravelRecord,\n    unlockTravelRecord,\n  } = useTravelRecord();\n  const {\n    lockBookmarkLocation,\n    unlocked: bookmarkLocationUnlocked,\n    isEncrypted: bookmarkLocationEncrypted,\n    encryptBookmarkLocation,\n    unlockBookmarkLocation,\n  } = useBookmarkLocation();\n\n  return {\n    lock: () => {\n      lockTravelRecord();\n      lockBookmarkLocation();\n    },\n    unlocked: travelRecordUnlocked && bookmarkLocationUnlocked,\n    isEncrypted: travelRecordEncrypted || bookmarkLocationEncrypted,\n    encrypt: (password: string) => {\n      encryptBookmarkLocation(password);\n      encryptTravelRecord(password);\n    },\n    unlock: (password: string) =>\n      unlockTravelRecord(password) && unlockBookmarkLocation(password),\n  };\n});\n","import { AES, enc } from \"crypto-js\";\nimport { useCallback, useMemo, useState } from \"react\";\nimport { useLocalStorage, useMount, useUpdateEffect } from \"react-use\";\n\nconst encryptValue = (input: string, password: string) =>\n  AES.encrypt(input, password).toString();\n\nconst decryptValue = (input: string, password: string) =>\n  AES.decrypt(input, password).toString(enc.Utf8);\n\nexport const useEncryptedStore = <T extends T[] | Object>({\n  key,\n  defaultValue: fallbackValue,\n}: {\n  key: string;\n  defaultValue: T;\n}) => {\n  const [incognito, setIncognito] = useLocalStorage(\"incognito\", false);\n  const [defaultValue] = useState<T>(fallbackValue);\n\n  const [password, setPassword] = useState<string | null>(null);\n  const [unlocked, setUnlocked] = useState(false);\n  const [savedValue, setSavedValue] = useLocalStorage<string>(\n    key,\n    password\n      ? encryptValue(JSON.stringify(defaultValue), password)\n      : JSON.stringify(defaultValue)\n  );\n\n  const [decryptedValue, setDecryptedValue] = useState<T>(defaultValue);\n\n  const isEncrypted = useMemo(() => {\n    try {\n      if (!savedValue) return false;\n      JSON.parse(savedValue);\n    } catch (e) {\n      return true;\n    }\n    return false;\n  }, [savedValue]);\n\n  useMount(() => {\n    if (!isEncrypted) {\n      setDecryptedValue(savedValue ? JSON.parse(savedValue) : defaultValue);\n      setUnlocked(true);\n    }\n  });\n\n  useUpdateEffect(() => {\n    if (!unlocked || incognito) return;\n    if (isEncrypted && !password) return;\n    const value = JSON.stringify(decryptedValue);\n    setSavedValue(password ? encryptValue(value, password) : value);\n  }, [decryptedValue]);\n\n  const initPassword = useCallback(\n    (newPassword: string) => {\n      if (isEncrypted) return;\n      const data = encryptValue(\n        savedValue || JSON.stringify(defaultValue),\n        newPassword\n      );\n      setSavedValue(data);\n      setPassword(newPassword);\n    },\n    [savedValue, setSavedValue, defaultValue, isEncrypted]\n  );\n\n  const unlockStore = useCallback(\n    (password: string) => {\n      if (!isEncrypted) return true;\n      try {\n        const decryptedValue = decryptValue(\n          savedValue || JSON.stringify(defaultValue),\n          password\n        );\n        setDecryptedValue(JSON.parse(decryptedValue));\n        setPassword(password);\n        setUnlocked(true);\n\n        return true;\n      } catch (e) {\n        return false;\n      }\n    },\n    [defaultValue, savedValue, isEncrypted]\n  );\n\n  const lockStore = useCallback(() => {\n    if (!isEncrypted) return;\n    setUnlocked(false);\n    setPassword(null);\n    setDecryptedValue(defaultValue);\n  }, [isEncrypted, defaultValue]);\n\n  return {\n    isEncrypted,\n    unlockStore,\n    lockStore,\n    value: decryptedValue,\n    setValue: setDecryptedValue,\n    initPassword,\n    unlocked,\n    incognito,\n    setIncognito,\n    password,\n  };\n};\n","export default __webpack_public_path__ + \"static/media/cross.d2bbc7f7.svg\";","import constate from \"constate\";\nimport { any, hasIn } from \"ramda\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useLocalStorage } from \"react-use\";\n\nexport const [UseCameraProvider, useCamera] = constate(() => {\n  const [hasCameraSupport] = useState(\"mediaDevices\" in navigator);\n\n  const [preferredCameraId, setPreferredCameraId] = useLocalStorage(\n    \"preferred_camera_id\",\n    \"AUTO\"\n  );\n  const [cameraList, setCameraList] = useState<InputDeviceInfo[] | null>(null);\n\n  const initCameraList = useCallback(async () => {\n    try {\n      if (\n        !hasCameraSupport ||\n        !hasIn(\"enumerateDevices\", navigator.mediaDevices)\n      ) {\n        setCameraList([]);\n        return;\n      }\n\n      const deviceList = await navigator.mediaDevices.enumerateDevices();\n\n      const cameraList = deviceList.filter<InputDeviceInfo>(\n        (device): device is InputDeviceInfo => device.kind === \"videoinput\"\n      );\n\n      setCameraList(cameraList);\n    } catch (e) {\n      alert(\"Unable to list device.\\n\\n\" + e);\n    }\n  }, [hasCameraSupport]);\n\n  useEffect(() => {\n    initCameraList();\n  }, [hasCameraSupport, initCameraList]);\n\n  useEffect(() => {\n    if (\n      cameraList !== null &&\n      preferredCameraId !== \"AUTO\" &&\n      !any(({ deviceId }) => deviceId === preferredCameraId, cameraList)\n    ) {\n      setPreferredCameraId(\"AUTO\");\n    }\n  }, [cameraList, setPreferredCameraId, preferredCameraId]);\n\n  return {\n    preferredCameraId: !any(\n      ({ deviceId }) => deviceId === preferredCameraId,\n      cameraList || []\n    )\n      ? \"AUTO\"\n      : preferredCameraId,\n    cameraList: cameraList || [],\n    setPreferredCameraId,\n    hasCameraSupport,\n  };\n});\n","import styled from \"styled-components\";\nimport React from \"react\";\nimport TextareaAutosize from \"react-autosize-textarea\";\n\ntype Props = {\n  value: string;\n  onChange?: (value: string) => void;\n  placeholder?: string;\n  readOnly?: boolean;\n};\n\nexport const Place = ({\n  value,\n  onChange,\n  placeholder,\n  readOnly,\n  ...rest\n}: Props) => {\n  return (\n    <StyledInput\n      value={value}\n      placeholder={placeholder}\n      readOnly={readOnly}\n      onChange={(e: any) => {\n        onChange && onChange(e.target.value);\n      }}\n      async\n      {...rest}\n    />\n  );\n};\n\nexport const StyledInput = styled(TextareaAutosize)`\n  text-align: center;\n  font-size: 32px;\n  background-color: transparent;\n  border: 0;\n  outline: none;\n  margin: 4px 0;\n  color: #fed426;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  width: 100%;\n\n  padding-left: 0;\n  padding-right: 0;\n  line-height: 36px;\n  font-weight: 500;\n\n  &:focus {\n    outline: none;\n  }\n`;\n","import \"dayjs/locale/zh-hk\";\nimport \"dayjs/locale/en\";\n\nimport _, { ConfigType } from \"dayjs\";\nimport i18n from \"i18next\";\n\nexport const dayjs = (date?: ConfigType) =>\n  _(date).locale(i18n.language.toLowerCase());\n","export default __webpack_public_path__ + \"static/media/tick.6d45b966.svg\";","export default __webpack_public_path__ + \"static/media/checkbox.4e2450ab.svg\";","export default __webpack_public_path__ + \"static/media/checkboxChecked.7f6c2da0.svg\";","import { Checkbox } from \"@material-ui/core\";\nimport React from \"react\";\nimport { isAndroid } from \"react-device-detect\";\nimport styled from \"styled-components\";\n\nimport checkbox from \"../assets/checkbox.svg\";\nimport checkboxChecked from \"../assets/checkboxChecked.svg\";\n\ntype Props = {\n  checked: boolean;\n  onChange?: (value: boolean) => void;\n  readOnly?: boolean;\n};\n\nexport const CheckBox = ({ onChange, checked, readOnly = false }: Props) => {\n  const handleClick = () => {\n    onChange && onChange(!checked);\n  };\n\n  return isAndroid ? (\n    <StyledCheckbox\n      checked={checked}\n      onClick={handleClick}\n      color=\"primary\"\n      readOnly={readOnly}\n    />\n  ) : (\n    <IOSCheckBox\n      src={checked ? checkboxChecked : checkbox}\n      onClick={readOnly ? undefined : handleClick}\n    />\n  );\n};\n\nconst IOSCheckBox = styled.img`\n  height: 32px;\n  display: inline-block;\n  vertical-align: top;\n  margin: 0 8px;\n`;\n\nconst StyledCheckbox = styled(Checkbox)`\n  display: inline-block;\n  vertical-align: top;\n  margin: 0 8px !important;\n  padding: 0 !important;\n\n  &.MuiCheckbox-colorPrimary {\n    color: #fff !important;\n  }\n`;\n","import { isNil, propOr } from \"ramda\";\nimport React, { useMemo } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\";\n\nimport cross from \"../../assets/cross.svg\";\nimport tick from \"../../assets/tick.svg\";\nimport { ConfirmButton } from \"../../components/Button\";\nimport { CheckBox } from \"../../components/CheckBox\";\nimport { Place } from \"../../components/Place\";\nimport { locationType } from \"../../hooks/useBookmark\";\nimport { useI18n } from \"../../hooks/useI18n\";\nimport { TravelRecord } from \"../../hooks/useTravelRecord\";\nimport { dayjs } from \"../../utils/dayjs\";\nimport { getVenueName } from \"../../utils/qr\";\n\ntype Props = {\n  travelRecord: TravelRecord;\n  readOnly?: boolean;\n  confirmPageIcon?: string | null;\n  autoLeave?: boolean;\n  autoLeaveHour?: number;\n  setAutoLeave?: React.Dispatch<React.SetStateAction<boolean>>;\n  handleChangeAutoLeaveHour?: () => void;\n  handleLeave?: () => void;\n};\n\nexport const ConfirmPage = ({\n  travelRecord,\n  readOnly = false,\n  confirmPageIcon,\n  autoLeave = true,\n  setAutoLeave,\n  autoLeaveHour = 4,\n  handleChangeAutoLeaveHour,\n  handleLeave,\n}: Props) => {\n  const { t } = useTranslation(\"confirm\");\n  const { language } = useI18n();\n\n  const date = useMemo(() => dayjs(travelRecord.inTime), [travelRecord]);\n\n  const place = useMemo(\n    () => getVenueName(travelRecord, language),\n    [travelRecord, language]\n  );\n\n  const venueType = propOr(locationType.PLACE, \"type\", travelRecord);\n\n  return (\n    <>\n      <PageWrapper>\n        <Header>\n          {confirmPageIcon && <Logo src={confirmPageIcon} />}\n          {readOnly ? (\n            <Cross src={cross} />\n          ) : (\n            <Link to=\"/\">\n              <Cross src={cross} />\n            </Link>\n          )}\n        </Header>\n        <MessageWrapper>\n          {venueType === locationType.TAXI ? (\n            <>\n              <Msg>{t(\"message.you_have_entered_taxi\")}</Msg>\n              <License>{t(\"message.res_mark\")}:</License>\n            </>\n          ) : (\n            <Msg>{t(\"message.you_have_entered_venue\")}</Msg>\n          )}\n          <PlaceWrapper>\n            <Place value={place || \"\"} readOnly />\n          </PlaceWrapper>\n          <Time>{date.format(\"YYYY-MM-DD HH:mm\")}</Time>\n        </MessageWrapper>\n        <TickWrapper>\n          <TickWrapperInner>\n            <Tick src={tick} />\n          </TickWrapperInner>\n        </TickWrapper>\n        <ActionGroup>\n          <ConfirmButton shadowed onClick={handleLeave}>\n            {venueType === locationType.TAXI\n              ? t(\"button.get_off\")\n              : t(\"button.leave\")}\n          </ConfirmButton>\n          <LeaveMessage>{t(\"message.remember_to_leave\")}</LeaveMessage>\n          <AutoLeave>\n            <CheckBoxWrapper>\n              <CheckBox\n                checked={autoLeave}\n                onChange={setAutoLeave}\n                readOnly={isNil(setAutoLeave)}\n              />\n              {t(\"form.auto_leave_after_x_hour\", { hour: autoLeaveHour })}\n            </CheckBoxWrapper>\n            <Change onClick={handleChangeAutoLeaveHour}>\n              {t(\"global:button.change\")}\n            </Change>\n          </AutoLeave>\n        </ActionGroup>\n      </PageWrapper>\n    </>\n  );\n};\n\nconst PageWrapper = styled.div`\n  width: 100%;\n  height: 100%;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n  display: flex;\n  flex-direction: column;\n  color: #fff;\n`;\n\nconst Logo = styled.img`\n  height: 72px;\n`;\n\nconst Header = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  flex-shrink: 0;\n  margin: 24px 0 16px 0;\n`;\n\nconst Cross = styled.img`\n  height: 20px;\n  margin: 8px 24px;\n  position: absolute;\n  right: 0;\n`;\n\nconst PlaceWrapper = styled.div`\n  padding: 0 32px;\n`;\n\nconst MessageWrapper = styled.div`\n  width: 100%;\n  height: 50%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst TickWrapper = styled.div`\n  height: 100%;\n  width: 100%;\n  text-align: center;\n`;\n\nconst TickWrapperInner = styled.div`\n  height: 100%;\n  max-height: 200px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n`;\n\nconst Tick = styled.img`\n  display: inline-block;\n  height: 100%;\n  max-height: 110px;\n`;\n\nconst Msg = styled.div`\n  color: #ffffff;\n  text-align: center;\n  font-size: 15px;\n`;\n\nconst License = styled(Msg)`\n  margin-top: 8px;\n`;\n\nconst Time = styled.div`\n  color: #ffffff;\n  text-align: center;\n`;\n\nconst AutoLeave = styled.div`\n  width: 100%;\n  max-width: 380px;\n  margin: 16px auto 24px auto;\n  display: flex;\n  flex-shrink: 0;\n  font-size: 14px;\n`;\n\nconst CheckBoxWrapper = styled.div`\n  width: 100%;\n  text-align: left;\n  padding-left: 24px;\n  line-height: 32px;\n`;\n\nconst Change = styled.div`\n  flex-shrink: 0;\n  padding-right: 24px;\n  line-height: 32px;\n  color: #fed426;\n  text-decoration: underline;\n`;\n\nconst LeaveMessage = styled.div`\n  text-align: center;\n  flex-shrink: 0;\n`;\n\nconst ActionGroup = styled.div`\n  width: 100%;\n  flex-shrink: 0;\n`;\n","import dayjs, { Dayjs } from \"dayjs\";\nimport React, { useMemo } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Modal from \"react-modal\";\nimport styled from \"styled-components\";\n\nimport crossBlack from \"../../assets/crossBlack.svg\";\nimport { locationType } from \"../../hooks/useBookmark\";\nimport { ModalConfirmButton } from \"../Button\";\n\ntype Props = {\n  isModalOpen: boolean;\n  onCancel: () => void;\n  onLeaveNow: () => void;\n  onLeaved: () => void;\n  place: string;\n  date: Dayjs;\n  outTime?: string;\n  venueType: locationType;\n};\n\nexport const Prompt = ({\n  isModalOpen,\n  onCancel,\n  onLeaveNow,\n  onLeaved,\n  place,\n  date,\n  outTime,\n  venueType,\n}: Props) => {\n  const { t } = useTranslation(\"confirm\");\n  const toDate = useMemo(() => dayjs(outTime), [outTime]);\n\n  const heightBase = outTime ? 430 : 390;\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      onRequestClose={onCancel}\n      style={{\n        overlay: {\n          backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n        },\n        content: {\n          outline: \"none\",\n          border: \"0\",\n          padding: \"16px\",\n          borderRadius: \"8px\",\n          width: \"240px\",\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          height:\n            venueType === locationType.TAXI\n              ? `${heightBase + 24}px`\n              : `${heightBase}px`,\n          overflow: \"hidden\",\n        },\n      }}\n      ariaHideApp={false}\n    >\n      <CrossWrapper>\n        <Cross src={crossBlack} onClick={onCancel} />\n      </CrossWrapper>\n      {venueType === locationType.TAXI ? (\n        <>\n          <Msg>{t(\"message.you_have_entered_taxi\")}</Msg>\n          <License>{t(\"message.res_mark\")}:</License>\n        </>\n      ) : (\n        <Msg>{t(\"message.you_have_entered_venue\")}</Msg>\n      )}\n      <Place>{place}</Place>\n      <Time>{date.format(\"YYYY-MM-DD HH:mm\")}</Time>\n      <Title>{t(\"message.you_sure_want_to_leave\")}</Title>\n      {outTime && (\n        <AutoLeave>\n          {t(\"form.auto_leave_at\", { time: toDate.format(\"MM-DD HH:mm\") })}\n        </AutoLeave>\n      )}\n      <ModalConfirmButton onClick={onLeaveNow}>\n        {t(\"button.leave_now\")}\n      </ModalConfirmButton>\n      <GreenButton onClick={onLeaved}> {t(\"button.already_left\")}</GreenButton>\n    </Modal>\n  );\n};\n\nconst Cross = styled.img`\n  height: 20px;\n`;\n\nconst CrossWrapper = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: flex-end;\n  margin-bottom: 8px;\n`;\n\nconst Title = styled.div`\n  font-size: 20px;\n  text-align: center;\n  margin: 64px 0;\n  font-weight: 500;\n`;\n\nconst GreenButton = styled(ModalConfirmButton)`\n  background-color: #12b188;\n  color: #fff;\n  text-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n`;\n\nconst Msg = styled.div`\n  text-align: center;\n  font-size: 16px;\n`;\n\nconst License = styled(Msg)`\n  margin-top: 8px;\n`;\n\nconst Time = styled.div`\n  text-align: center;\n  font-size: 14px;\n`;\n\nconst Place = styled.div`\n  color: unset;\n  text-shadow: none;\n  text-align: center;\n  font-size: 28px;\n  font-weight: 500;\n  line-height: 48px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n`;\n\nconst AutoLeave = styled.div`\n  font-size: 12px;\n  text-align: center;\n  padding: 12px 0;\n`;\n","import \"pickerjs/dist/picker.min.css\";\n\nimport Picker from \"pickerjs\";\nimport React, { forwardRef, useImperativeHandle, useState } from \"react\";\nimport styled from \"styled-components\";\n\nexport type DatePickerHandler = {\n  init: () => void;\n  getValue: () => Date;\n};\n\nexport const DatePicker = forwardRef((props: any, ref: any) => {\n  const [pickerInstance, setPickerInstance] = useState<Picker | null>(null);\n\n  // mount effect wont work on model, need to call this after onAfterOpen event\n  useImperativeHandle(ref, () => ({\n    init: () => {\n      const ele = document.querySelector(\n        \".js-inline-picker\"\n      ) as HTMLElement | null;\n      if (!ele) return;\n      setPickerInstance(\n        new Picker(ele, {\n          inline: true,\n          rows: 2,\n        })\n      );\n    },\n    getValue: () => {\n      if (!pickerInstance) return \"\";\n      return pickerInstance.getDate();\n    },\n  }));\n\n  return (\n    <Wrapper>\n      <div className=\"js-inline-picker\" />\n    </Wrapper>\n  );\n});\n\nconst Wrapper = styled.div`\n  & .picker {\n    font-size: 12px;\n  }\n\n  & .picker-dialog {\n    border: 0;\n  }\n\n  & .picker-cell:before {\n    background-image: unset;\n  }\n\n  & .picker-cell:after {\n    background-image: unset;\n  }\n\n  & .picker-picked {\n    color: unset;\n    border-top: #12b188 1px solid;\n    border-bottom: #12b188 1px solid;\n  }\n\n  & .picker-cell {\n    padding: 0 4px;\n  }\n\n  & .picker-item {\n    padding: 3px 0px;\n  }\n\n  & .picker-cell + .picker-cell {\n    border: 0;\n  }\n`;\n","import { Snackbar } from \"@material-ui/core\";\nimport { Alert } from \"@material-ui/lab\";\nimport { Dayjs } from \"dayjs\";\nimport React, { useRef, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Modal from \"react-modal\";\nimport styled from \"styled-components\";\n\nimport crossBlack from \"../../assets/crossBlack.svg\";\nimport { ModalConfirmButton } from \"../../components/Button\";\nimport { DatePicker, DatePickerHandler } from \"../../components/DatePicker\";\nimport { useTime } from \"../../hooks/useTime\";\nimport { dayjs } from \"../../utils/dayjs\";\n\ntype Props = {\n  isModalOpen: boolean;\n  onCancel: () => void;\n  onConfirm: (date: Dayjs) => void;\n  date: Dayjs;\n};\n\nexport const TimePickModal = ({\n  isModalOpen,\n  onCancel,\n  onConfirm,\n  date,\n}: Props) => {\n  const { t } = useTranslation(\"confirm\");\n  const { currentTime } = useTime();\n  const datePickerRef = useRef<DatePickerHandler>(null);\n  const [showPastDateError, setShowPastDateError] = useState(false);\n  const [showFutureDateError, setShowFutureDateError] = useState(false);\n\n  const initPicker = () => {\n    datePickerRef.current && datePickerRef.current.init();\n  };\n\n  const handleConfirm = () => {\n    const leaveDate = datePickerRef.current\n      ? datePickerRef.current.getValue()\n      : Date();\n\n    const leaveDateDayJs = dayjs(leaveDate).startOf(\"minute\");\n\n    if (leaveDateDayJs.isBefore(date.startOf(\"minute\"))) {\n      setShowPastDateError(true);\n    } else if (leaveDateDayJs.isAfter(currentTime)) {\n      setShowFutureDateError(true);\n    } else {\n      onConfirm(leaveDateDayJs);\n    }\n  };\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      onRequestClose={onCancel}\n      style={{\n        overlay: {\n          backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n        },\n        content: {\n          outline: \"none\",\n          border: \"0\",\n          padding: \"16px\",\n          borderRadius: \"8px\",\n          width: \"240px\",\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          height: \"280px\",\n          overflow: \"hidden\",\n        },\n      }}\n      ariaHideApp={false}\n      onAfterOpen={initPicker}\n    >\n      <CrossWrapper>\n        <Cross src={crossBlack} onClick={onCancel} />\n      </CrossWrapper>\n      <Title>{t(\"message.when_you_left\")}</Title>\n      <TimePickerWrapper>\n        <DatePicker ref={datePickerRef} />\n      </TimePickerWrapper>\n      <ModalConfirmButton onClick={handleConfirm}>\n        {t(\"global:button.confirm\")}\n      </ModalConfirmButton>\n      <Snackbar\n        open={showPastDateError}\n        autoHideDuration={2000}\n        onClose={() => {\n          setShowPastDateError(false);\n        }}\n        anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\n      >\n        <Alert elevation={6} variant=\"filled\" severity=\"error\">\n          {t(\"message.leave_time_earlier_than_enter\")}\n        </Alert>\n      </Snackbar>\n      <Snackbar\n        open={showFutureDateError}\n        autoHideDuration={2000}\n        onClose={() => {\n          setShowFutureDateError(false);\n        }}\n        anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\n      >\n        <Alert elevation={6} variant=\"filled\" severity=\"error\">\n          {t(\"message.future_leave_time\")}\n        </Alert>\n      </Snackbar>\n    </Modal>\n  );\n};\n\nconst Cross = styled.img`\n  height: 20px;\n`;\n\nconst CrossWrapper = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: flex-end;\n`;\n\nconst Title = styled.div`\n  font-size: 20px;\n  text-align: center;\n  margin-top: 24px;\n`;\n\nconst TimePickerWrapper = styled.div`\n  border-bottom: 1px #eeeeee solid;\n  border-top: 1px #eeeeee solid;\n  padding: 32px 0;\n  margin: 16px 0;\n`;\n","import { Dayjs } from \"dayjs\";\nimport { propOr } from \"ramda\";\nimport React, { useMemo, useState } from \"react\";\n\nimport { locationType } from \"../../hooks/useBookmark\";\nimport { useI18n } from \"../../hooks/useI18n\";\nimport { useTime } from \"../../hooks/useTime\";\nimport { useTravelRecord } from \"../../hooks/useTravelRecord\";\nimport { dayjs } from \"../../utils/dayjs\";\nimport { getVenueName } from \"../../utils/qr\";\nimport { Prompt } from \"./Prompt\";\nimport { TimePickModal } from \"./TimePickModal\";\n\ntype Props = {\n  visible: boolean;\n  onDiscard: () => void;\n  onFinish: (leaveTime: Dayjs) => void;\n  id: string;\n};\n\nexport const LeaveModal = ({ id, visible, onDiscard, onFinish }: Props) => {\n  const { currentTime } = useTime();\n  const { getTravelRecord } = useTravelRecord();\n  const [isTimePickModalOpen, setIsTimePickModalOpen] = useState(false);\n  const { language } = useI18n();\n\n  const travelRecord = useMemo(\n    () => getTravelRecord(id),\n    [id, getTravelRecord]\n  );\n\n  const place = useMemo(\n    () => (travelRecord ? getVenueName(travelRecord, language) : \"\"),\n    [travelRecord, language]\n  );\n\n  const handleLeaveNow = () => {\n    onFinish(currentTime);\n  };\n\n  const handleLeaveEarly = (time: Dayjs) => {\n    onFinish(time);\n  };\n\n  const venueType = propOr<locationType, typeof travelRecord, locationType>(\n    locationType.PLACE,\n    \"type\",\n    travelRecord\n  );\n\n  return !travelRecord ? (\n    <></>\n  ) : (\n    <>\n      <Prompt\n        isModalOpen={visible && !isTimePickModalOpen}\n        onCancel={() => {\n          setIsTimePickModalOpen(false);\n          onDiscard();\n        }}\n        onLeaveNow={handleLeaveNow}\n        onLeaved={() => {\n          setIsTimePickModalOpen(true);\n        }}\n        place={place || \"\"}\n        date={dayjs(travelRecord.inTime)}\n        outTime={travelRecord.outTime}\n        venueType={venueType}\n      />\n      <TimePickModal\n        isModalOpen={visible && isTimePickModalOpen}\n        onCancel={() => {\n          setIsTimePickModalOpen(false);\n          onDiscard();\n        }}\n        onConfirm={handleLeaveEarly}\n        date={dayjs(travelRecord.inTime)}\n      />\n    </>\n  );\n};\n","import constate from \"constate\";\nimport { equals, find, pick, reject } from \"ramda\";\nimport { useCallback } from \"react\";\nimport { v4 as uuid } from \"uuid\";\n\nimport { DecodedJSON } from \"../utils/qr\";\nimport { useEncryptedStore } from \"./useEncryptedStore\";\nimport { useTime } from \"./useTime\";\n\nexport enum locationType {\n  PLACE = \"PLACE\",\n  TAXI = \"TAXI\",\n}\n\nexport type Place = {\n  venueId?: string;\n  nameEn?: string;\n  nameZh?: string;\n  type: locationType.PLACE;\n  originalData?: DecodedJSON;\n};\n\nexport type Taxi = {\n  venueId?: string;\n  type: locationType.TAXI;\n};\n\nexport type Location = Place | Taxi;\n\nexport type SavedLocation = Location & { id: string; createdAt: string };\n\nconst trimData = pick([\"venueId\", \"nameEn\", \"nameZh\", \"type\", \"originalData\"]);\n\nexport const [UseBookmarkLocationProvider, useBookmarkLocation] = constate(\n  () => {\n    const { currentTime } = useTime();\n    const {\n      unlockStore: unlockBookmarkLocation,\n      lockStore: lockBookmarkLocation,\n      value: bookmarkLocation,\n      setValue: setBookmarkLocation,\n      initPassword: encryptBookmarkLocation,\n      unlocked,\n      isEncrypted,\n      password,\n    } = useEncryptedStore<SavedLocation[]>({\n      key: \"bookmark_location\",\n      defaultValue: [],\n    });\n\n    const removeBookmarkLocation = useCallback(\n      (id: string) => {\n        setBookmarkLocation((prev) =>\n          reject(({ id: itemId }) => itemId === id, prev)\n        );\n      },\n      [setBookmarkLocation]\n    );\n\n    const createBookmarkLocation = useCallback(\n      (record: Omit<SavedLocation, \"createdAt\">) => {\n        setBookmarkLocation((prev) => [\n          {\n            ...trimData(record),\n            createdAt: currentTime.toISOString(),\n            id: uuid(),\n          },\n          ...prev,\n        ]);\n      },\n      [setBookmarkLocation, currentTime]\n    );\n\n    const getBookmarkLocationId = useCallback(\n      (record: Omit<SavedLocation, \"createdAt\">) => {\n        const trimmedData = trimData(record);\n\n        const result = find((item) => {\n          const trimmedItem = trimData(item);\n          return equals(trimmedData, trimmedItem);\n        }, bookmarkLocation);\n\n        if (!result) return null;\n\n        return result.id;\n      },\n      [bookmarkLocation]\n    );\n\n    return {\n      unlockBookmarkLocation,\n      lockBookmarkLocation,\n      bookmarkLocation,\n      setBookmarkLocation,\n      encryptBookmarkLocation,\n      unlocked,\n      isEncrypted,\n      password,\n      removeBookmarkLocation,\n      createBookmarkLocation,\n      getBookmarkLocationId,\n    };\n  }\n);\n","import constate from \"constate\";\nimport { adjust, find, findIndex, reject } from \"ramda\";\nimport { useCallback, useEffect, useMemo } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { useLocalStorage } from \"react-use\";\nimport { v4 as uuid } from \"uuid\";\n\nimport { dayjs } from \"../utils/dayjs\";\nimport { Location } from \"./useBookmark\";\nimport { useEncryptedStore } from \"./useEncryptedStore\";\nimport { useTime } from \"./useTime\";\n\nexport enum travelRecordInputType {\n  MANUALLY = \"MANUALLY\",\n  SCAN = \"SCAN\",\n  BOOKMARK = \"BOOKMARK\",\n}\n\nexport type TravelRecord = Location & {\n  id: string;\n  inputType: travelRecordInputType;\n  inTime: string;\n  outTime?: string;\n};\n\nconst sortRecord = (record: TravelRecord[]) =>\n  record.sort((a, b) =>\n    dayjs(a.inTime).isSame(b.inTime)\n      ? 0\n      : dayjs(a.inTime).isBefore(b.inTime)\n      ? 1\n      : -1\n  );\n\nexport const [UseTravelRecordProvider, useTravelRecord] = constate(() => {\n  const { currentTime } = useTime();\n  const {\n    unlockStore: unlockTravelRecord,\n    lockStore: lockTravelRecord,\n    value: travelRecord,\n    setValue: setTravelRecord,\n    initPassword: encryptTravelRecord,\n    unlocked,\n    incognito,\n    setIncognito,\n    isEncrypted,\n    password,\n  } = useEncryptedStore<TravelRecord[]>({\n    key: \"travel_record\",\n    defaultValue: [],\n  });\n  const browserHistory = useHistory();\n\n  const [autoRemoveRecordDay, setAutoRemoveRecordDay] = useLocalStorage(\n    \"auto_remove_record_after\",\n    30\n  );\n\n  const { pastTravelRecord, currentTravelRecord } = useMemo(() => {\n    const { pastTravelRecord, currentTravelRecord } = travelRecord.reduce<{\n      pastTravelRecord: TravelRecord[];\n      currentTravelRecord: TravelRecord[];\n    }>(\n      (acc, item) => {\n        const isPast =\n          item.outTime && dayjs(item.outTime).isBefore(currentTime);\n\n        return isPast\n          ? {\n              pastTravelRecord: [item, ...acc.pastTravelRecord],\n              currentTravelRecord: [...acc.currentTravelRecord],\n            }\n          : {\n              pastTravelRecord: [...acc.pastTravelRecord],\n              currentTravelRecord: [item, ...acc.currentTravelRecord],\n            };\n      },\n      {\n        pastTravelRecord: [],\n        currentTravelRecord: [],\n      }\n    );\n\n    return {\n      pastTravelRecord: sortRecord(pastTravelRecord),\n      currentTravelRecord: sortRecord(currentTravelRecord),\n    };\n  }, [travelRecord, currentTime]);\n\n  useEffect(() => {\n    setTravelRecord((prev) =>\n      prev.filter(\n        ({ inTime }) =>\n          currentTime.diff(inTime, \"day\") <= (autoRemoveRecordDay || 30)\n      )\n    );\n  }, [currentTime, setTravelRecord, autoRemoveRecordDay]);\n\n  const createTravelRecord = useCallback(\n    (record: TravelRecord) => {\n      setTravelRecord((prev) => [record, ...prev]);\n    },\n    [setTravelRecord]\n  );\n\n  const getTravelRecord = useCallback(\n    (id: string) => find(({ id: itemId }) => itemId === id, travelRecord),\n    [travelRecord]\n  );\n\n  const updateTravelRecord = useCallback(\n    (id: string, data: Partial<TravelRecord>) => {\n      setTravelRecord((prev) => {\n        const index = findIndex(({ id: itemId }) => itemId === id, prev);\n        if (index < 0) return prev;\n        return adjust(\n          index,\n          (currentRecord) => ({ ...currentRecord, ...data }),\n          prev\n        );\n      });\n    },\n    [setTravelRecord]\n  );\n\n  const removeTravelRecord = useCallback(\n    (id: string) => {\n      setTravelRecord((prev) =>\n        reject(({ id: itemId }) => itemId === id, prev)\n      );\n    },\n    [setTravelRecord]\n  );\n\n  const enterLocation = useCallback(\n    (location: Location & { inputType: travelRecordInputType }) => {\n      const id = uuid();\n      const now = dayjs();\n\n      const record = {\n        ...location,\n        id,\n        inTime: now.toISOString(),\n        outTime: now.add(4, \"hour\").toISOString(),\n      };\n\n      createTravelRecord(record);\n\n      browserHistory.push({ pathname: `/confirm/${id}`, state: record });\n    },\n    [createTravelRecord, browserHistory]\n  );\n\n  return {\n    travelRecord,\n    setTravelRecord,\n    currentTravelRecord,\n    pastTravelRecord,\n    createTravelRecord,\n    getTravelRecord,\n    updateTravelRecord,\n    removeTravelRecord,\n    lockTravelRecord,\n    unlockTravelRecord,\n    encryptTravelRecord,\n    unlocked,\n    incognito,\n    setIncognito,\n    isEncrypted,\n    setAutoRemoveRecordDay,\n    autoRemoveRecordDay,\n    password,\n    enterLocation,\n  };\n});\n","import cameraSetting from \"./cameraSetting.json\";\nimport confirm from \"./confirm.json\";\nimport confirmPageSetting from \"./confirmPageSetting.json\";\nimport disclaimer from \"./disclaimer.json\";\nimport global from \"./global.json\";\nimport login from \"./login.json\";\nimport mainScreen from \"./mainScreen.json\";\nimport qrGenerator from \"./qrGenerator.json\";\nimport qrReader from \"./qrReader.json\";\nimport tutorial from \"./tutorial.json\";\nimport vaccinationQrReader from \"./vaccination_qr_reader.json\";\n\nconst locals = {\n  global,\n  tutorial,\n  main_screen: mainScreen,\n  qr_reader: qrReader,\n  qr_generator: qrGenerator,\n  login,\n  disclaimer,\n  confirm,\n  confirm_page_setting: confirmPageSetting,\n  camera_setting: cameraSetting,\n  vaccination_qr_reader: vaccinationQrReader,\n};\n\nexport default locals;\n","import cameraSetting from \"./cameraSetting.json\";\nimport confirm from \"./confirm.json\";\nimport confirmPageSetting from \"./confirmPageSetting.json\";\nimport disclaimer from \"./disclaimer.json\";\nimport global from \"./global.json\";\nimport login from \"./login.json\";\nimport mainScreen from \"./mainScreen.json\";\nimport qrGenerator from \"./qrGenerator.json\";\nimport qrReader from \"./qrReader.json\";\nimport tutorial from \"./tutorial.json\";\nimport vaccinationQrReader from \"./vaccination_qr_reader.json\";\n\nconst locals = {\n  global,\n  tutorial,\n  main_screen: mainScreen,\n  qr_reader: qrReader,\n  qr_generator: qrGenerator,\n  login,\n  disclaimer,\n  confirm,\n  confirm_page_setting: confirmPageSetting,\n  camera_setting: cameraSetting,\n  vaccination_qr_reader: vaccinationQrReader,\n};\n\nexport default locals;\n","import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\n\nimport { languageType } from \"./../constants/languageType\";\nimport english from \"./english\";\nimport traditionalChinese from \"./traditionalChinese\";\n\ni18n\n  .use(initReactI18next) // passes i18n down to react-i18next\n  .init({\n    resources: {\n      [languageType[\"ZH-HK\"]]: traditionalChinese,\n      [languageType[\"EN\"]]: english,\n    },\n    lng: languageType[\"ZH-HK\"],\n    fallbackLng: languageType[\"ZH-HK\"],\n    interpolation: {\n      escapeValue: false,\n    },\n    debug: true,\n  });\n","import { CircularProgress } from \"@material-ui/core\";\nimport React, { useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\n\n// Prevent flash\n// ref: https://github.com/gregberge/loadable-components/issues/322\nexport const PageLoading = () => {\n  const delay = 200; // 200ms\n  const [showLoadingIndicator, setLoadingIndicatorVisibility] = useState(false);\n\n  useEffect(() => {\n    const timer = setTimeout(() => setLoadingIndicatorVisibility(true), delay);\n\n    // this will clear Timeout when component unmont like in willComponentUnmount\n    return () => {\n      clearTimeout(timer);\n    };\n  });\n\n  return showLoadingIndicator ? (\n    <FixWrapper>\n      <Wrapper>\n        <CircularProgress />\n      </Wrapper>\n    </FixWrapper>\n  ) : null;\n};\n\nconst FixWrapper = styled.div`\n  z-index: 1000;\n  position: absolute;\n  top: 50%; /* position the top  edge of the element at the middle of the parent */\n  left: 50%; /* position the left edge of the element at the middle of the parent */\n\n  transform: translate(\n    -50%,\n    -50%\n  ); /* This is a shorthand of\n                                         translateX(-50%) and translateY(-50%) */\n`;\n\nconst Wrapper = styled.div`\n  background-color: #fff;\n  padding: 40px;\n  border-radius: 8px;\n`;\n","export default __webpack_public_path__ + \"static/media/greenTick.5e528318.svg\";","import { Dayjs } from \"dayjs\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Modal from \"react-modal\";\nimport styled from \"styled-components\";\n\nimport crossBlack from \"../../assets/crossBlack.svg\";\nimport greenTick from \"../../assets/greenTick.svg\";\nimport { ModalConfirmButton } from \"../../components/Button\";\n\ntype Props = {\n  isModalOpen: boolean;\n  onCancel: () => void;\n  onConfirm: (value: number) => void;\n  selectedAutoLeaveHour: number;\n  date: Dayjs;\n};\n\nexport const AutoLeaveModal = ({\n  isModalOpen,\n  onCancel,\n  onConfirm,\n  selectedAutoLeaveHour,\n  date,\n}: Props) => {\n  const { t } = useTranslation(\"confirm\");\n  const [autoLeaveHourTmp, setAutoLeaveHourTmp] = useState(\n    selectedAutoLeaveHour\n  );\n\n  useEffect(() => {\n    setAutoLeaveHourTmp(selectedAutoLeaveHour);\n  }, [setAutoLeaveHourTmp, selectedAutoLeaveHour]);\n\n  const handleConfirm = () => {\n    onConfirm(autoLeaveHourTmp);\n  };\n\n  const toDate = useMemo(() => date.add(autoLeaveHourTmp, \"hour\"), [\n    date,\n    autoLeaveHourTmp,\n  ]);\n\n  return (\n    <Modal\n      isOpen={isModalOpen}\n      onRequestClose={onCancel}\n      style={{\n        overlay: {\n          backgroundColor: \"rgba(0, 0, 0, 0.5)\",\n        },\n        content: {\n          outline: \"none\",\n          border: \"0\",\n          padding: \"16px\",\n          borderRadius: \"8px\",\n          width: \"240px\",\n          position: \"absolute\",\n          top: \"50%\",\n          left: \"50%\",\n          transform: \"translate(-50%, -50%)\",\n          height: \"370px\",\n          overflow: \"hidden\",\n        },\n      }}\n      ariaHideApp={false}\n    >\n      <CrossWrapper>\n        <Cross src={crossBlack} onClick={onCancel} />\n      </CrossWrapper>\n      <Title>{t(\"message.set_auto_leave_time\")}</Title>\n      <HourListWrapper id=\"scroll\">\n        <HourList>\n          {[\n            1,\n            2,\n            3,\n            4,\n            5,\n            6,\n            7,\n            8,\n            9,\n            10,\n            11,\n            12,\n            13,\n            14,\n            15,\n            16,\n            17,\n            18,\n            19,\n            20,\n            21,\n            22,\n            23,\n            24,\n          ].map((hour) => (\n            <HourListItem\n              onClick={() => {\n                setAutoLeaveHourTmp(hour);\n              }}\n              key={hour}\n            >\n              + {hour}\n              {t(\"form.hour\")}\n              {autoLeaveHourTmp === hour && <SelectedTick src={greenTick} />}\n            </HourListItem>\n          ))}\n        </HourList>\n      </HourListWrapper>\n      <TimeWrapper>\n        <div>{t(\"message.enter_at\", { time: date.format(\"MM-DD HH:mm\") })}</div>\n        <div>\n          {t(\"message.auto_leave_at\", { time: toDate.format(\"MM-DD HH:mm\") })}\n        </div>\n      </TimeWrapper>\n      <ModalConfirmButton onClick={handleConfirm}>\n        {t(\"global:button.confirm\")}\n      </ModalConfirmButton>\n    </Modal>\n  );\n};\n\nconst Cross = styled.img`\n  height: 20px;\n`;\n\nconst CrossWrapper = styled.div`\n  display: flex;\n  width: 100%;\n  justify-content: flex-end;\n`;\n\nconst Title = styled.h1`\n  font-size: 20px;\n  text-align: center;\n  margin-top: 20px;\n  margin-bottom: 0;\n`;\n\nconst HourListWrapper = styled.div`\n  overflow: auto;\n  height: 180px;\n  padding: 0 8px;\n`;\n\nconst HourList = styled.ul`\n  list-style: none;\n  margin: 0;\n  padding: 0;\n`;\n\nconst HourListItem = styled.li`\n  line-height: 40px;\n  border-bottom: 1px #eeeeee solid;\n  padding: 0 8px;\n`;\n\nconst TimeWrapper = styled.div`\n  font-size: 12px;\n  text-align: center;\n  padding: 16px 0;\n`;\n\nconst SelectedTick = styled.img`\n  height: 32px;\n  position: relative;\n  float: right;\n  top: 4px;\n`;\n","import { Dayjs } from \"dayjs\";\nimport { isNil } from \"ramda\";\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport { useHistory, useLocation, useParams } from \"react-router-dom\";\n\nimport { LeaveModal } from \"../../components/LeaveModal\";\nimport { TravelRecord, useTravelRecord } from \"../../hooks/useTravelRecord\";\nimport { dayjs } from \"../../utils/dayjs\";\nimport { AutoLeaveModal } from \"./AutoLeaveModal\";\nimport { ConfirmPage } from \"./ConfirmPage\";\n\ntype Props = {\n  confirmPageIcon?: string | null;\n};\n\nexport const Confirm = ({ confirmPageIcon }: Props) => {\n  const browserHistory = useHistory();\n  const { id } = useParams<{ id: string }>();\n  const { state } = useLocation<TravelRecord>();\n  const { updateTravelRecord, getTravelRecord } = useTravelRecord();\n\n  const [isAutoLeaveModalOpen, setIsAutoLeaveModalOpen] = useState(false);\n  const [isLeaveModalOpen, setIsLeaveModalOpen] = useState(false);\n\n  const travelRecord = useMemo(() => (state ? state : getTravelRecord(id)), [\n    state,\n    getTravelRecord,\n    id,\n  ]);\n\n  useEffect(() => {\n    if (!travelRecord) browserHistory.replace(\"/\");\n  }, [travelRecord, browserHistory]);\n\n  const [autoLeave, setAutoLeave] = useState(\n    travelRecord ? !isNil(travelRecord.outTime) : true\n  );\n  const [autoLeaveHour, setAutoLeaveHour] = useState(\n    travelRecord && travelRecord.outTime\n      ? dayjs(travelRecord.outTime).diff(travelRecord.inTime, \"hour\")\n      : 4\n  );\n\n  const inTime = useMemo(\n    () => (travelRecord ? travelRecord.inTime : dayjs().toISOString()),\n    [travelRecord]\n  );\n\n  const handleSetAutoLeaveHour = (value: number) => {\n    setAutoLeaveHour(value);\n    setIsAutoLeaveModalOpen(false);\n  };\n\n  const handleLeavePage = () => {\n    setIsAutoLeaveModalOpen(false);\n    setIsLeaveModalOpen(false);\n    browserHistory.push(\"/\");\n  };\n\n  const handleLeave = (date: Dayjs) => {\n    updateTravelRecord(id, {\n      outTime: date.startOf(\"minute\").toISOString(),\n    });\n    handleLeavePage();\n  };\n\n  useEffect(() => {\n    const toDate = dayjs(inTime).add(autoLeaveHour, \"hour\");\n    updateTravelRecord(id, {\n      outTime: autoLeave ? toDate.toISOString() : undefined,\n    });\n  }, [autoLeave, autoLeaveHour, updateTravelRecord, id, inTime]);\n\n  return travelRecord ? (\n    <>\n      <ConfirmPage\n        travelRecord={travelRecord}\n        confirmPageIcon={confirmPageIcon}\n        autoLeave={autoLeave}\n        setAutoLeave={setAutoLeave}\n        autoLeaveHour={autoLeaveHour}\n        handleChangeAutoLeaveHour={() => {\n          setIsAutoLeaveModalOpen(true);\n        }}\n        handleLeave={() => {\n          setIsLeaveModalOpen(true);\n        }}\n      />\n      <AutoLeaveModal\n        isModalOpen={isAutoLeaveModalOpen}\n        onCancel={() => {\n          setIsAutoLeaveModalOpen(false);\n        }}\n        onConfirm={handleSetAutoLeaveHour}\n        selectedAutoLeaveHour={autoLeaveHour}\n        date={dayjs(inTime)}\n      />\n      <LeaveModal\n        id={id}\n        visible={isLeaveModalOpen}\n        onDiscard={() => {\n          setIsLeaveModalOpen(false);\n        }}\n        onFinish={handleLeave}\n      />\n    </>\n  ) : (\n    <></>\n  );\n};\n","import \"webrtc-adapter\";\n\nimport { any, isNil } from \"ramda\";\nimport React, { Suspense, useCallback, useEffect, useMemo } from \"react\";\nimport {\n  Route,\n  RouteProps,\n  matchPath,\n  useHistory,\n  useLocation,\n} from \"react-router-dom\";\nimport { CSSTransition } from \"react-transition-group\";\nimport { useLocalStorage } from \"react-use\";\nimport { createGlobalStyle } from \"styled-components\";\n\nimport { PageLoading } from \"./components/PageLoading\";\nimport { Confirm } from \"./containers/Confirm\";\nimport { useLock } from \"./hooks/useLock\";\nimport { useMigration } from \"./hooks/useMigration\";\n\nconst QRGenerator = React.lazy(() => import(\"./containers/QRGenerator\"));\nconst QRReader = React.lazy(() => import(\"./containers/QRReader\"));\nconst CameraSetting = React.lazy(() => import(\"./containers/CameraSetting\"));\nconst Tutorial = React.lazy(() => import(\"./containers/Tutorial\"));\nconst MainScreen = React.lazy(() => import(\"./containers/MainScreen\"));\nconst Disclaimer = React.lazy(() => import(\"./containers/Disclaimer\"));\nconst Login = React.lazy(() => import(\"./containers/Login\"));\nconst ConfirmPageSetting = React.lazy(\n  () => import(\"./containers/ConfirmPageSetting\")\n);\nconst VaccinationQRReader = React.lazy(\n  () => import(\"./containers/VaccinationQRReader\")\n);\n\nexport const App = () => {\n  useMigration();\n  const [finishedTutorial, setFinishedTutorial] = useLocalStorage(\n    \"finished_tutorial\",\n    false\n  );\n  const [confirmPageIcon, setConfirmPageIcon] = useLocalStorage<string | null>(\n    \"confirmPageIcon\",\n    null\n  );\n  const { lock, unlocked, isEncrypted } = useLock();\n\n  const { pathname } = useLocation();\n  const browserHistory = useHistory();\n\n  const handleBlur = useCallback(() => {\n    if (pathname !== \"/qrReader\" && pathname !== \"/cameraSetting\") lock();\n  }, [lock, pathname]);\n\n  useEffect(() => {\n    window.addEventListener(\"blur\", handleBlur);\n    return () => {\n      window.removeEventListener(\"blur\", handleBlur);\n    };\n  }, [handleBlur]);\n\n  const pageMap = useMemo<\n    { route: RouteProps; component: React.ReactNode; privateRoute: boolean }[]\n  >(\n    () => [\n      {\n        privateRoute: false,\n        route: { exact: true, path: \"/tutorial\" },\n        component: <Tutorial setFinishedTutorial={setFinishedTutorial} />,\n      },\n      {\n        privateRoute: false,\n        route: { exact: true, path: \"/login\" },\n        component: <Login />,\n      },\n      {\n        privateRoute: true,\n        route: {\n          exact: true,\n          path: \"/\",\n        },\n        component: <MainScreen />,\n      },\n      {\n        privateRoute: true,\n        route: {\n          exact: true,\n          path: \"/confirm/:id\",\n        },\n        component: <Confirm confirmPageIcon={confirmPageIcon} />,\n      },\n      {\n        privateRoute: true,\n        route: {\n          exact: true,\n          path: \"/qrGenerator\",\n        },\n        component: <QRGenerator />,\n      },\n      {\n        privateRoute: true,\n        route: {\n          exact: true,\n          path: \"/disclaimer\",\n        },\n        component: <Disclaimer />,\n      },\n      {\n        privateRoute: true,\n        route: {\n          exact: true,\n          path: \"/qrReader\",\n        },\n        component: <QRReader />,\n      },\n      {\n        privateRoute: true,\n        route: {\n          exact: true,\n          path: \"/cameraSetting\",\n        },\n        component: <CameraSetting />,\n      },\n      {\n        privateRoute: true,\n        route: {\n          exact: true,\n          path: \"/confirmPageSetting\",\n        },\n        component: (\n          <ConfirmPageSetting\n            confirmPageIcon={confirmPageIcon}\n            setConfirmPageIcon={setConfirmPageIcon}\n          />\n        ),\n      },\n      {\n        privateRoute: true,\n        route: {\n          exact: true,\n          path: \"/vaccinationQRReader\",\n        },\n        component: <VaccinationQRReader />,\n      },\n    ],\n    [confirmPageIcon, setConfirmPageIcon, setFinishedTutorial]\n  );\n\n  // transition group cannot use switch component, thus need manual redirect handling\n  // ref: https://reactcommunity.org/react-transition-group/with-react-router\n  useEffect(() => {\n    if (!isEncrypted) return;\n    if (!unlocked && pathname !== \"/login\") {\n      browserHistory.replace(\"/login\");\n    }\n    if (unlocked && pathname === \"/login\") {\n      browserHistory.replace(\"/\");\n    }\n  }, [isEncrypted, unlocked, browserHistory, pathname]);\n\n  useEffect(() => {\n    if (!finishedTutorial && pathname !== \"/tutorial\") {\n      browserHistory.replace(\"/tutorial\");\n    }\n    if (finishedTutorial && pathname === \"/tutorial\") {\n      browserHistory.replace(\"/\");\n    }\n  }, [finishedTutorial, browserHistory, pathname]);\n\n  useEffect(() => {\n    const hasMatch = any(({ route }) => {\n      if (!route.path) return false;\n      return !isNil(matchPath(pathname, route));\n    }, pageMap);\n\n    if (!hasMatch) {\n      browserHistory.replace(\"/\");\n    }\n  }, [browserHistory, pathname, pageMap]);\n\n  return (\n    <>\n      <GlobalStyle />\n      {pageMap.map(({ route, component, privateRoute }) =>\n        privateRoute && !unlocked ? (\n          <React.Fragment key={String(route.path)} />\n        ) : (\n          <Route {...route} key={String(route.path)}>\n            {({ match }) => (\n              <CSSTransition\n                in={match != null}\n                timeout={300}\n                classNames=\"page\"\n                unmountOnExit\n              >\n                <div className=\"page\">\n                  <Suspense fallback={<PageLoading />}>{component}</Suspense>\n                </div>\n              </CSSTransition>\n            )}\n          </Route>\n        )\n      )}\n    </>\n  );\n};\n\nconst GlobalStyle = createGlobalStyle`\nhtml {\n  width: 100%;\n  height: 100%;\n}\n\nbody {\n  margin: 0;\n  font-family: Rubik, -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  background-color:#12b188;\n  width: 100%;\n  height: 100%;\n  position: relative;\n}\n\ntextarea {\n  font-family: inherit;\n}\n\n\n#root {\n  width: 100%;\n  height: 100%;\n}\n\na {\n  text-decoration: none;\n}\n\n.page {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-color: #12b188;\n  box-shadow: 0px 1px 2px rgba(0, 0, 0, 0.8);\n}\n\n.page-enter {\n  opacity: 0;\n  left: 100vw;\n  z-index: 1;\n}\n\n.page-enter-active {\n  opacity: 1;\n  left: 0vw;\n  z-index: 0;\n  transition: left 300ms cubic-bezier(0.25, 1, 0.5, 1);\n}\n\n.page-exit {\n  opacity: 1;\n  z-index: 0;\n  transform: scale(1);\n}\n\n.page-exit-active {\n  opacity: 0;\n  z-index: 0;\n  transform: scale(0.9);\n  transition: opacity 300ms, transform 300ms;\n}\n`;\n","import { has } from \"ramda\";\nimport { useEffect } from \"react\";\nimport { useLocalStorage, useShallowCompareEffect } from \"react-use\";\nimport { v4 as uuid } from \"uuid\";\n\nimport { useBookmarkLocation } from \"./useBookmark\";\nimport { TravelRecord, useTravelRecord } from \"./useTravelRecord\";\n\nexport const useMigration = () => {\n  const [, , removePasswordHash] = useLocalStorage<string | null>(\n    \"password_hash\",\n    null\n  );\n\n  useEffect(() => {\n    // Old version store password with SHA256, which can be brute-forced\n    removePasswordHash();\n  }, [removePasswordHash]);\n\n  const { unlocked, setTravelRecord, travelRecord, password } =\n    useTravelRecord();\n\n  useShallowCompareEffect(() => {\n    setTravelRecord((prev) =>\n      prev.map((item) => {\n        if (has(\"id\", item)) return item;\n        return { ...(item as TravelRecord), id: uuid() };\n      })\n    );\n  }, [unlocked, travelRecord, setTravelRecord]);\n\n  const { encryptBookmarkLocation, isEncrypted } = useBookmarkLocation();\n\n  useEffect(() => {\n    if (password && !isEncrypted) {\n      encryptBookmarkLocation(password);\n    }\n  }, [password, encryptBookmarkLocation, isEncrypted]);\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://cra.link/PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://cra.link/PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import \"./locales\";\n\nimport { ThemeProvider, createMuiTheme } from \"@material-ui/core\";\nimport { teal, yellow } from \"@material-ui/core/colors\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter } from \"react-router-dom\";\n\nimport { App } from \"./App\";\nimport { UseBookmarkLocationProvider } from \"./hooks/useBookmark\";\nimport { UseCameraProvider } from \"./hooks/useCamera\";\nimport { UseI18nProvider } from \"./hooks/useI18n\";\nimport { UseLockProvider } from \"./hooks/useLock\";\nimport { UseTimeProvider } from \"./hooks/useTime\";\nimport { UseTravelRecordProvider } from \"./hooks/useTravelRecord\";\nimport * as serviceWorkerRegistration from \"./serviceWorkerRegistration\";\n\nconst theme = createMuiTheme({\n  palette: {\n    primary: { main: teal[500] },\n    secondary: { main: yellow[600] },\n  },\n});\n\nReactDOM.render(\n  <React.StrictMode>\n    <UseI18nProvider>\n      <HashRouter basename=\"/\">\n        <ThemeProvider theme={theme}>\n          <UseTimeProvider>\n            <UseTravelRecordProvider>\n              <UseBookmarkLocationProvider>\n                <UseCameraProvider>\n                  <UseLockProvider>\n                    <App />\n                  </UseLockProvider>\n                </UseCameraProvider>\n              </UseBookmarkLocationProvider>\n            </UseTravelRecordProvider>\n          </UseTimeProvider>\n        </ThemeProvider>\n      </HashRouter>\n    </UseI18nProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://cra.link/PWA\nserviceWorkerRegistration.register({\n  onUpdate: () => {\n    const shouldReload = window.confirm(\"已有新版本, 請完全關閉後重新開啟\");\n    shouldReload && window.location.reload();\n  },\n});\n","import { dayjs } from \"./../utils/dayjs\";\nimport { useState } from \"react\";\nimport { useHarmonicIntervalFn } from \"react-use\";\nimport constate from \"constate\";\n\nexport const [UseTimeProvider, useTime] = constate(() => {\n  const [currentTime, setCurrentTime] = useState(dayjs());\n\n  useHarmonicIntervalFn(() => {\n    setCurrentTime(dayjs());\n  }, 1000);\n\n  return {\n    currentTime,\n  };\n});\n","// should match dayjs and react-i18-next\nexport enum languageType {\n  \"ZH-HK\" = \"zh-HK\",\n  \"EN\" = \"en\",\n}\n","import styled from \"styled-components\";\n\nexport const ConfirmButton = styled.button<{ shadowed?: boolean }>`\n  display: block;\n  margin: auto;\n  margin-bottom: 16px;\n  font-size: 24px;\n  padding: 10px 0;\n  width: 80%;\n  border-radius: 48px;\n  flex-shrink: 0;\n  max-width: 280px;\n  font-weight: 500;\n\n  ${(props) =>\n    props.disabled\n      ? `background-color: #D3D3D3;\n        color: #A1A1A1;\n        `\n      : `\n        background-color: #fed426;\n      `}\n\n  border: 0;\n  outline: none;\n  ${(props) =>\n    props.shadowed ? \"box-shadow: 0px 2px 4px 0px rgba(0, 0, 0, 0.5);\" : \"\"}\n\n  &:focus {\n    outline: none;\n    text-decoration: none;\n  }\n`;\n\nexport const ModalConfirmButton = styled(ConfirmButton)`\n  font-size: 16px;\n  padding: 12px 0;\n  width: 90%;\n  font-weight: unset;\n`;\n","import constate from \"constate\";\nimport { useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useLocalStorage } from \"react-use\";\n\nimport { languageType } from \"./../constants/languageType\";\n\nexport const [UseI18nProvider, useI18n] = constate(() => {\n  const [language, setLanguage] = useLocalStorage(\n    \"language\",\n    languageType[\"ZH-HK\"]\n  );\n  const { i18n } = useTranslation();\n\n  useEffect(() => {\n    i18n.changeLanguage(language);\n  }, [i18n, language]);\n\n  return {\n    language: language || languageType[\"ZH-HK\"],\n    setLanguage,\n  };\n});\n","export default __webpack_public_path__ + \"static/media/crossBlack.aafc0aee.svg\";"],"sourceRoot":""}